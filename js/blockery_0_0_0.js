const COLOR_RED=16711756,COLOR_ORANGE=16753968,COLOR_GREEN=5303436,COLOR_BLUE=1146111,BOUNCE_FACTOR=0.25,GRAVITY=1500;class Block{constructor(){let e=Math.floor(4*Math.random());0===e?this.color=COLOR_RED:1===e?this.color=COLOR_ORANGE:2===e?this.color=COLOR_GREEN:3===e?this.color=COLOR_BLUE:void 0;this._fill=0,this.x=0,this.y=-75,this.yv=0,this.z=0,this.zv=1e3*Math.random(),this.falling=!1,this.pit=0,this.yaw=0,this.rol=0,this.pitV=2*(360*(Math.random()-0.5)),this.yawV=2*(360*(Math.random()-0.5)),this.rolV=2*(360*(Math.random()-0.5))}fall(){this.falling=!0,this.yv=-500*Math.random()}blockLogic(e,n,u){this.row=n,this.col=u,this.x=BOARD.getBoardX(this.col);let g=BOARD.getBoardY(this.row);if(-1==this.row&&!this.falling)this.y=g+10*(Math.sin(performance.now()/1e3+this.col*-Math.PI/BOARD.COLUMNS)-1);else for(;0<e;)this.yv+=GRAVITY/UPDATES_PER_SECOND,this.y+=this.yv/UPDATES_PER_SECOND,!this.falling&&this.y>=g?(this.yv*=-BOUNCE_FACTOR,this.y=g):this.falling&&(this.pit+=this.pitV/UPDATES_PER_SECOND,this.yaw+=this.yawV/UPDATES_PER_SECOND,this.rol+=this.rolV/UPDATES_PER_SECOND,this.z+=this.zv/UPDATES_PER_SECOND),e-=1/UPDATES_PER_SECOND}set fill(e){this._fill=100<e?100:e}get fill(){return this._fill}isFull(){return 100<=this._fill}get gone(){return this.y>VISIBLE_HEIGHT}renderBlock(e,n){let u=this._fill/100;u--,u=u*u*u+1;let g=BOARD.BLOCK_WIDTH,P=BOARD.BLOCK_WIDTH*(1<5*u?1:5*u),E=g*u;CUBE_MESH.setColor(this.color,e,n),CUBE_MESH.render(e,this.x+(g-P)/2,this.y+g-E,this.z,P,E,P,this.pit,this.yaw,this.rol)}}const BOARD={get ROWS(){return 14},get COLUMNS(){return 10},get SPACING(){return 15},get BLOCK_WIDTH(){return 30},boardCenter:{x:VISIBLE_HEIGHT/2,y:VISIBLE_HEIGHT/2},fillRate:200,pendingFillTime:0,dropQueue:function(){let e=!0;for(let n=0;n<this.COLUMNS;n++)null===this.board[0][n]&&(this.board[0][n]=this.queue[n],this.queue[n]=null,e=!1);e&&(this.pendingFillTime=0)},fillQueue:function(e){this.pendingFillTime+=e;let n=!0;for(let u=0;u<this.COLUMNS;u++){this.queue[u]||(this.queue[u]=new Block);let g=this.queue[u];if((0===u||this.queue[u-1].isFull())&&!g.isFull()){let P=this.queue[u].fill;this.queue[u].fill+=this.fillRate*this.pendingFillTime,this.pendingFillTime-=(this.queue[u].fill-P)/this.fillRate,n=!1}}n&&this.dropQueue()},queue:[],board:[],dumpBlocks:[],init:function(){for(let e=0;e<this.ROWS;e++){this.board[e]=[];for(let n=0;n<this.COLUMNS;n++)this.board[e][n]=null}for(let e=0;e<this.COLUMNS;e++)this.queue[e]=null},logic:function(e){for(let n=this.ROWS-1;0<=n;n--)for(let g,u=0;u<this.COLUMNS;u++)if(g=this.board[n][u],null!==g)g.blockLogic(e,n,u);else if(0<n)for(let E,P=n;0<=P;P--)if(E=this.board[P][u],null!==E){this.board[n][u]=E,this.board[P][u]=null;break}this.fillQueue(e);for(let n=0;n<this.COLUMNS;n++)this.queue[n]&&this.queue[n].blockLogic(e,-1,n);this.dumpBlocks.forEach((n,u)=>{n.blockLogic(e,n.row,n.col),n.gone&&this.dumpBlocks.splice(u,1)})},render:function(e,n){this.renderBoardFrame(e,n),this.renderGrid(e,n),this.renderQueue(e,n),this.renderDumpBlocks(e,n)},renderQueue:function(e,n){for(let g,u=0;u<this.COLUMNS;u++)g=this.queue[u],null!==g&&g.renderBlock(e,n)},renderGrid:function(e,n){for(let u=0;u<this.ROWS;u++)for(let P,g=0;g<this.COLUMNS;g++)P=this.board[u][g],null!==P&&P.renderBlock(e,n)},renderDumpBlocks:function(e,n){this.dumpBlocks.forEach(u=>{u.renderBlock(e,n)})},renderBoardFrame:function(){},removeBlockFromBoard:function(e,n){this.dumpBlocks.push(this.board[e][n]),this.board[e][n]=null},getBoardX:function(e){return this.boardCenter.x-this.getBoardWidth()/2+e*(this.BLOCK_WIDTH+this.SPACING)},getBoardY:function(e){let n=this.boardCenter.y-this.getBoardHeight()/2;return-1==e?n:n+(e+1)*(this.BLOCK_WIDTH+this.SPACING)+this.SPACING},getBoardWidth:function(){return this.COLUMNS*(this.BLOCK_WIDTH+this.SPACING)-this.SPACING},getBoardHeight:function(){return(this.ROWS+1)*(this.BLOCK_WIDTH+this.SPACING)},removeIfMatchingNeighbors(e,n){let u=this.board[e][n];if(u){let P=!1;0<e&&this.matchWithNeighbor(e,n,e-1,n)&&(P=!0),e<this.ROWS-1&&this.matchWithNeighbor(e,n,e+1,n)&&(P=!0),0<n&&this.matchWithNeighbor(e,n,e,n-1)&&(P=!0),n<this.COLUMNS-1&&this.matchWithNeighbor(e,n,e,n+1)&&(P=!0),P&&this.removeBlockFromBoard(e,n)}},matchWithNeighbor:function(e,n,u,g){let P=this.board[e][n],E=this.board[u][g];return P&&E&&!(E.color!==P.color)&&(P.fall(),E.falling||this.removeIfMatchingNeighbors(u,g),!0)},onClick:function(e){let n=toScreenX(e.clientX),u=toScreenY(e.clientY),g=this.BLOCK_WIDTH+this.SPACING,P=Math.floor((u-this.boardCenter.y+this.getBoardHeight()/2-this.SPACING)/g-1),E=Math.floor((n-this.boardCenter.x+this.getBoardWidth()/2)/g);this.removeIfMatchingNeighbors(P,E)}};const CUBE_MESH={get vertices(){return[1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1]},get indices(){return[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]},get normals(){return[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0]},setColor:function(e,n,u){let g=intToRGB(e);n.uniform3f(u.uniformLocations.color,g.r,g.g,g.b)},init:function(e,n,u){this.worldMatrix=n.world,this.identityMatrix=n.identity,this.matrixUniformLocation=u.uniformLocations.worldMatrix,this.buffers={vertex:e.createBuffer(),normal:e.createBuffer(),index:e.createBuffer()},e.bindBuffer(e.ARRAY_BUFFER,this.buffers.vertex),e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.vertices),e.STATIC_DRAW),e.vertexAttribPointer(u.attributeLocations.position,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(u.attributeLocations.position),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.normal),e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.normals),e.STATIC_DRAW),e.vertexAttribPointer(u.attributeLocations.normal,3,e.FLOAT,!0,0,0),e.enableVertexAttribArray(u.attributeLocations.normal),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffers.index),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indices),e.STATIC_DRAW)},render:function(e,n,u,g=0,P=50,E=50,A=50,R=0,_=0,I=0){mat4.translate(this.worldMatrix,this.identityMatrix,[n+P/2,u+E/2,g+A/2]),(2!==P||2!==E||2!==A)&&mat4.scale(this.worldMatrix,this.worldMatrix,[P/2,E/2,A/2]),0!==I&&(mat4.rotate(rollMatrix,this.identityMatrix,I*toRad,[0,0,1]),mat4.mul(this.worldMatrix,this.worldMatrix,rollMatrix)),0!==_&&(mat4.rotate(yawMatrix,this.identityMatrix,_*toRad,[0,1,0]),mat4.mul(this.worldMatrix,this.worldMatrix,yawMatrix)),0!==R&&(mat4.rotate(pitchMatrix,this.identityMatrix,R*toRad,[1,0,0]),mat4.mul(this.worldMatrix,this.worldMatrix,pitchMatrix)),bindMatrix(this.worldMatrix,this.matrixUniformLocation),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffers.index),e.drawElements(e.TRIANGLES,this.indices.length,e.UNSIGNED_SHORT,0)}};let pitchMatrix=new Float32Array(16),yawMatrix=new Float32Array(16),rollMatrix=new Float32Array(16);const toRad=Math.PI/180;(function(n,u){if('object'==typeof exports&&'object'==typeof module)module.exports=u();else if('function'==typeof define&&define.amd)define([],u);else{var g=u();for(var P in g)('object'==typeof exports?exports:n)[P]=g[P]}})(this,function(){return function(e){function n(g){if(u[g])return u[g].exports;var P=u[g]={i:g,l:!1,exports:{}};return e[g].call(P.exports,P,P.exports,n),P.l=!0,P.exports}var u={};return n.m=e,n.c=u,n.d=function(g,P,E){n.o(g,P)||Object.defineProperty(g,P,{configurable:!1,enumerable:!0,get:E})},n.n=function(g){var P=g&&g.__esModule?function(){return g['default']}:function(){return g};return n.d(P,'a',P),P},n.o=function(g,P){return Object.prototype.hasOwnProperty.call(g,P)},n.p='',n(n.s=4)}([function(e,n){'use strict';Object.defineProperty(n,'__esModule',{value:!0}),n.setMatrixArrayType=function(O){n.ARRAY_TYPE=R=O},n.toRadian=function(O){return O*I},n.equals=function(O,N){return Math.abs(O-N)<=A*Math.max(1,Math.abs(O),Math.abs(N))};var A=n.EPSILON=1e-6,R=n.ARRAY_TYPE='undefined'==typeof Float32Array?Array:Float32Array,_=n.RANDOM=Math.random,I=Math.PI/180},function(e,n,u){'use strict';function B(ue,ce,me){var be=ce[0],fe=ce[1],pe=ce[2],ge=ce[3],Pe=ce[4],xe=ce[5],Ee=ce[6],Ae=ce[7],Le=ce[8],ye=me[0],Se=me[1],Re=me[2],_e=me[3],Ie=me[4],he=me[5],Oe=me[6],qe=me[7],Ne=me[8];return ue[0]=ye*be+Se*ge+Re*Ee,ue[1]=ye*fe+Se*Pe+Re*Ae,ue[2]=ye*pe+Se*xe+Re*Le,ue[3]=_e*be+Ie*ge+he*Ee,ue[4]=_e*fe+Ie*Pe+he*Ae,ue[5]=_e*pe+Ie*xe+he*Le,ue[6]=Oe*be+qe*ge+Ne*Ee,ue[7]=Oe*fe+qe*Pe+Ne*Ae,ue[8]=Oe*pe+qe*xe+Ne*Le,ue}function ae(ue,ce,me){return ue[0]=ce[0]-me[0],ue[1]=ce[1]-me[1],ue[2]=ce[2]-me[2],ue[3]=ce[3]-me[3],ue[4]=ce[4]-me[4],ue[5]=ce[5]-me[5],ue[6]=ce[6]-me[6],ue[7]=ce[7]-me[7],ue[8]=ce[8]-me[8],ue}Object.defineProperty(n,'__esModule',{value:!0}),n.sub=n.mul=void 0,n.create=function(){var ue=new ie.ARRAY_TYPE(9);return ue[0]=1,ue[1]=0,ue[2]=0,ue[3]=0,ue[4]=1,ue[5]=0,ue[6]=0,ue[7]=0,ue[8]=1,ue},n.fromMat4=function(ue,ce){return ue[0]=ce[0],ue[1]=ce[1],ue[2]=ce[2],ue[3]=ce[4],ue[4]=ce[5],ue[5]=ce[6],ue[6]=ce[8],ue[7]=ce[9],ue[8]=ce[10],ue},n.clone=function(ue){var ce=new ie.ARRAY_TYPE(9);return ce[0]=ue[0],ce[1]=ue[1],ce[2]=ue[2],ce[3]=ue[3],ce[4]=ue[4],ce[5]=ue[5],ce[6]=ue[6],ce[7]=ue[7],ce[8]=ue[8],ce},n.copy=function(ue,ce){return ue[0]=ce[0],ue[1]=ce[1],ue[2]=ce[2],ue[3]=ce[3],ue[4]=ce[4],ue[5]=ce[5],ue[6]=ce[6],ue[7]=ce[7],ue[8]=ce[8],ue},n.fromValues=function(ue,ce,me,be,fe,pe,ge,Pe,xe){var Ee=new ie.ARRAY_TYPE(9);return Ee[0]=ue,Ee[1]=ce,Ee[2]=me,Ee[3]=be,Ee[4]=fe,Ee[5]=pe,Ee[6]=ge,Ee[7]=Pe,Ee[8]=xe,Ee},n.set=function(ue,ce,me,be,fe,pe,ge,Pe,xe,Ee){return ue[0]=ce,ue[1]=me,ue[2]=be,ue[3]=fe,ue[4]=pe,ue[5]=ge,ue[6]=Pe,ue[7]=xe,ue[8]=Ee,ue},n.identity=function(ue){return ue[0]=1,ue[1]=0,ue[2]=0,ue[3]=0,ue[4]=1,ue[5]=0,ue[6]=0,ue[7]=0,ue[8]=1,ue},n.transpose=function(ue,ce){if(ue===ce){var me=ce[1],be=ce[2],fe=ce[5];ue[1]=ce[3],ue[2]=ce[6],ue[3]=me,ue[5]=ce[7],ue[6]=be,ue[7]=fe}else ue[0]=ce[0],ue[1]=ce[3],ue[2]=ce[6],ue[3]=ce[1],ue[4]=ce[4],ue[5]=ce[7],ue[6]=ce[2],ue[7]=ce[5],ue[8]=ce[8];return ue},n.invert=function(ue,ce){var me=ce[0],be=ce[1],fe=ce[2],pe=ce[3],ge=ce[4],Pe=ce[5],xe=ce[6],Ee=ce[7],Ae=ce[8],Le=Ae*ge-Pe*Ee,ye=-Ae*pe+Pe*xe,Se=Ee*pe-ge*xe,Re=me*Le+be*ye+fe*Se;return Re?(Re=1/Re,ue[0]=Le*Re,ue[1]=(-Ae*be+fe*Ee)*Re,ue[2]=(Pe*be-fe*ge)*Re,ue[3]=ye*Re,ue[4]=(Ae*me-fe*xe)*Re,ue[5]=(-Pe*me+fe*pe)*Re,ue[6]=Se*Re,ue[7]=(-Ee*me+be*xe)*Re,ue[8]=(ge*me-be*pe)*Re,ue):null},n.adjoint=function(ue,ce){var me=ce[0],be=ce[1],fe=ce[2],pe=ce[3],ge=ce[4],Pe=ce[5],xe=ce[6],Ee=ce[7],Ae=ce[8];return ue[0]=ge*Ae-Pe*Ee,ue[1]=fe*Ee-be*Ae,ue[2]=be*Pe-fe*ge,ue[3]=Pe*xe-pe*Ae,ue[4]=me*Ae-fe*xe,ue[5]=fe*pe-me*Pe,ue[6]=pe*Ee-ge*xe,ue[7]=be*xe-me*Ee,ue[8]=me*ge-be*pe,ue},n.determinant=function(ue){var ce=ue[0],me=ue[1],be=ue[2],fe=ue[3],pe=ue[4],ge=ue[5],Pe=ue[6],xe=ue[7],Ee=ue[8];return ce*(Ee*pe-ge*xe)+me*(-Ee*fe+ge*Pe)+be*(xe*fe-pe*Pe)},n.multiply=B,n.translate=function(ue,ce,me){var be=ce[0],fe=ce[1],pe=ce[2],ge=ce[3],Pe=ce[4],xe=ce[5],Ee=ce[6],Ae=ce[7],Le=ce[8],ye=me[0],Se=me[1];return ue[0]=be,ue[1]=fe,ue[2]=pe,ue[3]=ge,ue[4]=Pe,ue[5]=xe,ue[6]=ye*be+Se*ge+Ee,ue[7]=ye*fe+Se*Pe+Ae,ue[8]=ye*pe+Se*xe+Le,ue},n.rotate=function(ue,ce,me){var be=ce[0],fe=ce[1],pe=ce[2],ge=ce[3],Pe=ce[4],xe=ce[5],Ee=ce[6],Ae=ce[7],Le=ce[8],ye=Math.sin(me),Se=Math.cos(me);return ue[0]=Se*be+ye*ge,ue[1]=Se*fe+ye*Pe,ue[2]=Se*pe+ye*xe,ue[3]=Se*ge-ye*be,ue[4]=Se*Pe-ye*fe,ue[5]=Se*xe-ye*pe,ue[6]=Ee,ue[7]=Ae,ue[8]=Le,ue},n.scale=function(ue,ce,me){var be=me[0],fe=me[1];return ue[0]=be*ce[0],ue[1]=be*ce[1],ue[2]=be*ce[2],ue[3]=fe*ce[3],ue[4]=fe*ce[4],ue[5]=fe*ce[5],ue[6]=ce[6],ue[7]=ce[7],ue[8]=ce[8],ue},n.fromTranslation=function(ue,ce){return ue[0]=1,ue[1]=0,ue[2]=0,ue[3]=0,ue[4]=1,ue[5]=0,ue[6]=ce[0],ue[7]=ce[1],ue[8]=1,ue},n.fromRotation=function(ue,ce){var me=Math.sin(ce),be=Math.cos(ce);return ue[0]=be,ue[1]=me,ue[2]=0,ue[3]=-me,ue[4]=be,ue[5]=0,ue[6]=0,ue[7]=0,ue[8]=1,ue},n.fromScaling=function(ue,ce){return ue[0]=ce[0],ue[1]=0,ue[2]=0,ue[3]=0,ue[4]=ce[1],ue[5]=0,ue[6]=0,ue[7]=0,ue[8]=1,ue},n.fromMat2d=function(ue,ce){return ue[0]=ce[0],ue[1]=ce[1],ue[2]=0,ue[3]=ce[2],ue[4]=ce[3],ue[5]=0,ue[6]=ce[4],ue[7]=ce[5],ue[8]=1,ue},n.fromQuat=function(ue,ce){var me=ce[0],be=ce[1],fe=ce[2],pe=ce[3],ge=me+me,Pe=be+be,xe=fe+fe,Ee=me*ge,Ae=be*ge,Le=be*Pe,ye=fe*ge,Se=fe*Pe,Re=fe*xe,_e=pe*ge,Ie=pe*Pe,he=pe*xe;return ue[0]=1-Le-Re,ue[3]=Ae-he,ue[6]=ye+Ie,ue[1]=Ae+he,ue[4]=1-Ee-Re,ue[7]=Se-_e,ue[2]=ye-Ie,ue[5]=Se+_e,ue[8]=1-Ee-Le,ue},n.normalFromMat4=function(ue,ce){var me=ce[0],be=ce[1],fe=ce[2],pe=ce[3],ge=ce[4],Pe=ce[5],xe=ce[6],Ee=ce[7],Ae=ce[8],Le=ce[9],ye=ce[10],Se=ce[11],Re=ce[12],_e=ce[13],Ie=ce[14],he=ce[15],Oe=me*Pe-be*ge,qe=me*xe-fe*ge,Ne=me*Ee-pe*ge,we=be*xe-fe*Pe,Me=be*Ee-pe*Pe,Te=fe*Ee-pe*xe,ve=Ae*_e-Le*Re,Ye=Ae*Ie-ye*Re,Be=Ae*he-Se*Re,Ce=Le*Ie-ye*_e,De=Le*he-Se*_e,ke=ye*he-Se*Ie,Fe=Oe*ke-qe*De+Ne*Ce+we*Be-Me*Ye+Te*ve;return Fe?(Fe=1/Fe,ue[0]=(Pe*ke-xe*De+Ee*Ce)*Fe,ue[1]=(xe*Be-ge*ke-Ee*Ye)*Fe,ue[2]=(ge*De-Pe*Be+Ee*ve)*Fe,ue[3]=(fe*De-be*ke-pe*Ce)*Fe,ue[4]=(me*ke-fe*Be+pe*Ye)*Fe,ue[5]=(be*Be-me*De-pe*ve)*Fe,ue[6]=(_e*Te-Ie*Me+he*we)*Fe,ue[7]=(Ie*Ne-Re*Te-he*qe)*Fe,ue[8]=(Re*Me-_e*Ne+he*Oe)*Fe,ue):null},n.projection=function(ue,ce,me){return ue[0]=2/ce,ue[1]=0,ue[2]=0,ue[3]=0,ue[4]=-2/me,ue[5]=0,ue[6]=-1,ue[7]=1,ue[8]=1,ue},n.str=function(ue){return'mat3('+ue[0]+', '+ue[1]+', '+ue[2]+', '+ue[3]+', '+ue[4]+', '+ue[5]+', '+ue[6]+', '+ue[7]+', '+ue[8]+')'},n.frob=function(ue){return Math.sqrt(Math.pow(ue[0],2)+Math.pow(ue[1],2)+Math.pow(ue[2],2)+Math.pow(ue[3],2)+Math.pow(ue[4],2)+Math.pow(ue[5],2)+Math.pow(ue[6],2)+Math.pow(ue[7],2)+Math.pow(ue[8],2))},n.add=function(ue,ce,me){return ue[0]=ce[0]+me[0],ue[1]=ce[1]+me[1],ue[2]=ce[2]+me[2],ue[3]=ce[3]+me[3],ue[4]=ce[4]+me[4],ue[5]=ce[5]+me[5],ue[6]=ce[6]+me[6],ue[7]=ce[7]+me[7],ue[8]=ce[8]+me[8],ue},n.subtract=ae,n.multiplyScalar=function(ue,ce,me){return ue[0]=ce[0]*me,ue[1]=ce[1]*me,ue[2]=ce[2]*me,ue[3]=ce[3]*me,ue[4]=ce[4]*me,ue[5]=ce[5]*me,ue[6]=ce[6]*me,ue[7]=ce[7]*me,ue[8]=ce[8]*me,ue},n.multiplyScalarAndAdd=function(ue,ce,me,be){return ue[0]=ce[0]+me[0]*be,ue[1]=ce[1]+me[1]*be,ue[2]=ce[2]+me[2]*be,ue[3]=ce[3]+me[3]*be,ue[4]=ce[4]+me[4]*be,ue[5]=ce[5]+me[5]*be,ue[6]=ce[6]+me[6]*be,ue[7]=ce[7]+me[7]*be,ue[8]=ce[8]+me[8]*be,ue},n.exactEquals=function(ue,ce){return ue[0]===ce[0]&&ue[1]===ce[1]&&ue[2]===ce[2]&&ue[3]===ce[3]&&ue[4]===ce[4]&&ue[5]===ce[5]&&ue[6]===ce[6]&&ue[7]===ce[7]&&ue[8]===ce[8]},n.equals=function(ue,ce){var me=ue[0],be=ue[1],fe=ue[2],pe=ue[3],ge=ue[4],Pe=ue[5],xe=ue[6],Ee=ue[7],Ae=ue[8],Le=ce[0],ye=ce[1],Se=ce[2],Re=ce[3],_e=ce[4],Ie=ce[5],he=ce[6],Oe=ce[7],qe=ce[8];return Math.abs(me-Le)<=ie.EPSILON*Math.max(1,Math.abs(me),Math.abs(Le))&&Math.abs(be-ye)<=ie.EPSILON*Math.max(1,Math.abs(be),Math.abs(ye))&&Math.abs(fe-Se)<=ie.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Se))&&Math.abs(pe-Re)<=ie.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Re))&&Math.abs(ge-_e)<=ie.EPSILON*Math.max(1,Math.abs(ge),Math.abs(_e))&&Math.abs(Pe-Ie)<=ie.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Ie))&&Math.abs(xe-he)<=ie.EPSILON*Math.max(1,Math.abs(xe),Math.abs(he))&&Math.abs(Ee-Oe)<=ie.EPSILON*Math.max(1,Math.abs(Ee),Math.abs(Oe))&&Math.abs(Ae-qe)<=ie.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(qe))};var ne=u(0),ie=function(ue){if(ue&&ue.__esModule)return ue;var ce={};if(null!=ue)for(var me in ue)Object.prototype.hasOwnProperty.call(ue,me)&&(ce[me]=ue[me]);return ce.default=ue,ce}(ne);var le=n.mul=B,de=n.sub=ae},function(e,n,u){'use strict';function P(){var _e=new ge.ARRAY_TYPE(3);return _e[0]=0,_e[1]=0,_e[2]=0,_e}function A(_e){var Ie=_e[0],he=_e[1],Oe=_e[2];return Math.sqrt(Ie*Ie+he*he+Oe*Oe)}function R(_e,Ie,he){var Oe=new ge.ARRAY_TYPE(3);return Oe[0]=_e,Oe[1]=Ie,Oe[2]=he,Oe}function N(_e,Ie,he){return _e[0]=Ie[0]-he[0],_e[1]=Ie[1]-he[1],_e[2]=Ie[2]-he[2],_e}function M(_e,Ie,he){return _e[0]=Ie[0]*he[0],_e[1]=Ie[1]*he[1],_e[2]=Ie[2]*he[2],_e}function T(_e,Ie,he){return _e[0]=Ie[0]/he[0],_e[1]=Ie[1]/he[1],_e[2]=Ie[2]/he[2],_e}function G(_e,Ie){var he=Ie[0]-_e[0],Oe=Ie[1]-_e[1],qe=Ie[2]-_e[2];return Math.sqrt(he*he+Oe*Oe+qe*qe)}function Q(_e,Ie){var he=Ie[0]-_e[0],Oe=Ie[1]-_e[1],qe=Ie[2]-_e[2];return he*he+Oe*Oe+qe*qe}function K(_e){var Ie=_e[0],he=_e[1],Oe=_e[2];return Ie*Ie+he*he+Oe*Oe}function J(_e,Ie){var he=Ie[0],Oe=Ie[1],qe=Ie[2],Ne=he*he+Oe*Oe+qe*qe;return 0<Ne&&(Ne=1/Math.sqrt(Ne),_e[0]=Ie[0]*Ne,_e[1]=Ie[1]*Ne,_e[2]=Ie[2]*Ne),_e}function $(_e,Ie){return _e[0]*Ie[0]+_e[1]*Ie[1]+_e[2]*Ie[2]}Object.defineProperty(n,'__esModule',{value:!0}),n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0,n.create=P,n.clone=function(_e){var Ie=new ge.ARRAY_TYPE(3);return Ie[0]=_e[0],Ie[1]=_e[1],Ie[2]=_e[2],Ie},n.length=A,n.fromValues=R,n.copy=function(_e,Ie){return _e[0]=Ie[0],_e[1]=Ie[1],_e[2]=Ie[2],_e},n.set=function(_e,Ie,he,Oe){return _e[0]=Ie,_e[1]=he,_e[2]=Oe,_e},n.add=function(_e,Ie,he){return _e[0]=Ie[0]+he[0],_e[1]=Ie[1]+he[1],_e[2]=Ie[2]+he[2],_e},n.subtract=N,n.multiply=M,n.divide=T,n.ceil=function(_e,Ie){return _e[0]=Math.ceil(Ie[0]),_e[1]=Math.ceil(Ie[1]),_e[2]=Math.ceil(Ie[2]),_e},n.floor=function(_e,Ie){return _e[0]=Math.floor(Ie[0]),_e[1]=Math.floor(Ie[1]),_e[2]=Math.floor(Ie[2]),_e},n.min=function(_e,Ie,he){return _e[0]=Math.min(Ie[0],he[0]),_e[1]=Math.min(Ie[1],he[1]),_e[2]=Math.min(Ie[2],he[2]),_e},n.max=function(_e,Ie,he){return _e[0]=Math.max(Ie[0],he[0]),_e[1]=Math.max(Ie[1],he[1]),_e[2]=Math.max(Ie[2],he[2]),_e},n.round=function(_e,Ie){return _e[0]=Math.round(Ie[0]),_e[1]=Math.round(Ie[1]),_e[2]=Math.round(Ie[2]),_e},n.scale=function(_e,Ie,he){return _e[0]=Ie[0]*he,_e[1]=Ie[1]*he,_e[2]=Ie[2]*he,_e},n.scaleAndAdd=function(_e,Ie,he,Oe){return _e[0]=Ie[0]+he[0]*Oe,_e[1]=Ie[1]+he[1]*Oe,_e[2]=Ie[2]+he[2]*Oe,_e},n.distance=G,n.squaredDistance=Q,n.squaredLength=K,n.negate=function(_e,Ie){return _e[0]=-Ie[0],_e[1]=-Ie[1],_e[2]=-Ie[2],_e},n.inverse=function(_e,Ie){return _e[0]=1/Ie[0],_e[1]=1/Ie[1],_e[2]=1/Ie[2],_e},n.normalize=J,n.dot=$,n.cross=function(_e,Ie,he){var Oe=Ie[0],qe=Ie[1],Ne=Ie[2],we=he[0],Me=he[1],Te=he[2];return _e[0]=qe*Te-Ne*Me,_e[1]=Ne*we-Oe*Te,_e[2]=Oe*Me-qe*we,_e},n.lerp=function(_e,Ie,he,Oe){var qe=Ie[0],Ne=Ie[1],we=Ie[2];return _e[0]=qe+Oe*(he[0]-qe),_e[1]=Ne+Oe*(he[1]-Ne),_e[2]=we+Oe*(he[2]-we),_e},n.hermite=function(_e,Ie,he,Oe,qe,Ne){var we=Ne*Ne,Me=we*(2*Ne-3)+1,Te=we*(Ne-2)+Ne,ve=we*(Ne-1),Ye=we*(3-2*Ne);return _e[0]=Ie[0]*Me+he[0]*Te+Oe[0]*ve+qe[0]*Ye,_e[1]=Ie[1]*Me+he[1]*Te+Oe[1]*ve+qe[1]*Ye,_e[2]=Ie[2]*Me+he[2]*Te+Oe[2]*ve+qe[2]*Ye,_e},n.bezier=function(_e,Ie,he,Oe,qe,Ne){var we=1-Ne,Me=we*we,Te=Ne*Ne,ve=Me*we,Ye=3*Ne*Me,Be=3*Te*we,Ce=Te*Ne;return _e[0]=Ie[0]*ve+he[0]*Ye+Oe[0]*Be+qe[0]*Ce,_e[1]=Ie[1]*ve+he[1]*Ye+Oe[1]*Be+qe[1]*Ce,_e[2]=Ie[2]*ve+he[2]*Ye+Oe[2]*Be+qe[2]*Ce,_e},n.random=function(_e,Ie){Ie=Ie||1;var he=2*ge.RANDOM()*Math.PI,Oe=2*ge.RANDOM()-1,qe=Math.sqrt(1-Oe*Oe)*Ie;return _e[0]=Math.cos(he)*qe,_e[1]=Math.sin(he)*qe,_e[2]=Oe*Ie,_e},n.transformMat4=function(_e,Ie,he){var Oe=Ie[0],qe=Ie[1],Ne=Ie[2],we=he[3]*Oe+he[7]*qe+he[11]*Ne+he[15];return we=we||1,_e[0]=(he[0]*Oe+he[4]*qe+he[8]*Ne+he[12])/we,_e[1]=(he[1]*Oe+he[5]*qe+he[9]*Ne+he[13])/we,_e[2]=(he[2]*Oe+he[6]*qe+he[10]*Ne+he[14])/we,_e},n.transformMat3=function(_e,Ie,he){var Oe=Ie[0],qe=Ie[1],Ne=Ie[2];return _e[0]=Oe*he[0]+qe*he[3]+Ne*he[6],_e[1]=Oe*he[1]+qe*he[4]+Ne*he[7],_e[2]=Oe*he[2]+qe*he[5]+Ne*he[8],_e},n.transformQuat=function(_e,Ie,he){var Oe=Ie[0],qe=Ie[1],Ne=Ie[2],we=he[0],Me=he[1],Te=he[2],ve=he[3],Ye=ve*Oe+Me*Ne-Te*qe,Be=ve*qe+Te*Oe-we*Ne,Ce=ve*Ne+we*qe-Me*Oe,De=-we*Oe-Me*qe-Te*Ne;return _e[0]=Ye*ve+De*-we+Be*-Te-Ce*-Me,_e[1]=Be*ve+De*-Me+Ce*-we-Ye*-Te,_e[2]=Ce*ve+De*-Te+Ye*-Me-Be*-we,_e},n.rotateX=function(_e,Ie,he,Oe){var qe=[],Ne=[];return qe[0]=Ie[0]-he[0],qe[1]=Ie[1]-he[1],qe[2]=Ie[2]-he[2],Ne[0]=qe[0],Ne[1]=qe[1]*Math.cos(Oe)-qe[2]*Math.sin(Oe),Ne[2]=qe[1]*Math.sin(Oe)+qe[2]*Math.cos(Oe),_e[0]=Ne[0]+he[0],_e[1]=Ne[1]+he[1],_e[2]=Ne[2]+he[2],_e},n.rotateY=function(_e,Ie,he,Oe){var qe=[],Ne=[];return qe[0]=Ie[0]-he[0],qe[1]=Ie[1]-he[1],qe[2]=Ie[2]-he[2],Ne[0]=qe[2]*Math.sin(Oe)+qe[0]*Math.cos(Oe),Ne[1]=qe[1],Ne[2]=qe[2]*Math.cos(Oe)-qe[0]*Math.sin(Oe),_e[0]=Ne[0]+he[0],_e[1]=Ne[1]+he[1],_e[2]=Ne[2]+he[2],_e},n.rotateZ=function(_e,Ie,he,Oe){var qe=[],Ne=[];return qe[0]=Ie[0]-he[0],qe[1]=Ie[1]-he[1],qe[2]=Ie[2]-he[2],Ne[0]=qe[0]*Math.cos(Oe)-qe[1]*Math.sin(Oe),Ne[1]=qe[0]*Math.sin(Oe)+qe[1]*Math.cos(Oe),Ne[2]=qe[2],_e[0]=Ne[0]+he[0],_e[1]=Ne[1]+he[1],_e[2]=Ne[2]+he[2],_e},n.angle=function(_e,Ie){var he=R(_e[0],_e[1],_e[2]),Oe=R(Ie[0],Ie[1],Ie[2]);J(he,he),J(Oe,Oe);var qe=$(he,Oe);return 1<qe?0:-1>qe?Math.PI:Math.acos(qe)},n.str=function(_e){return'vec3('+_e[0]+', '+_e[1]+', '+_e[2]+')'},n.exactEquals=function(_e,Ie){return _e[0]===Ie[0]&&_e[1]===Ie[1]&&_e[2]===Ie[2]},n.equals=function(_e,Ie){var he=_e[0],Oe=_e[1],qe=_e[2],Ne=Ie[0],we=Ie[1],Me=Ie[2];return Math.abs(he-Ne)<=ge.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ne))&&Math.abs(Oe-we)<=ge.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(we))&&Math.abs(qe-Me)<=ge.EPSILON*Math.max(1,Math.abs(qe),Math.abs(Me))};var pe=u(0),ge=function(_e){if(_e&&_e.__esModule)return _e;var Ie={};if(null!=_e)for(var he in _e)Object.prototype.hasOwnProperty.call(_e,he)&&(Ie[he]=_e[he]);return Ie.default=_e,Ie}(pe),Pe=n.sub=N,xe=n.mul=M,Ee=n.div=T,Ae=n.dist=G,Le=n.sqrDist=Q,ye=n.len=A,Se=n.sqrLen=K,Re=n.forEach=function(){var _e=P();return function(Ie,he,Oe,qe,Ne,we){var Me,Te;for(he||(he=3),Oe||(Oe=0),Te=qe?Math.min(qe*he+Oe,Ie.length):Ie.length,Me=Oe;Me<Te;Me+=he)_e[0]=Ie[Me],_e[1]=Ie[Me+1],_e[2]=Ie[Me+2],Ne(_e,_e,we),Ie[Me]=_e[0],Ie[Me+1]=_e[1],Ie[Me+2]=_e[2];return Ie}}()},function(e,n,u){'use strict';function P(){var Pe=new le.ARRAY_TYPE(4);return Pe[0]=0,Pe[1]=0,Pe[2]=0,Pe[3]=0,Pe}function O(Pe,xe,Ee){return Pe[0]=xe[0]-Ee[0],Pe[1]=xe[1]-Ee[1],Pe[2]=xe[2]-Ee[2],Pe[3]=xe[3]-Ee[3],Pe}function N(Pe,xe,Ee){return Pe[0]=xe[0]*Ee[0],Pe[1]=xe[1]*Ee[1],Pe[2]=xe[2]*Ee[2],Pe[3]=xe[3]*Ee[3],Pe}function M(Pe,xe,Ee){return Pe[0]=xe[0]/Ee[0],Pe[1]=xe[1]/Ee[1],Pe[2]=xe[2]/Ee[2],Pe[3]=xe[3]/Ee[3],Pe}function W(Pe,xe,Ee){return Pe[0]=xe[0]*Ee,Pe[1]=xe[1]*Ee,Pe[2]=xe[2]*Ee,Pe[3]=xe[3]*Ee,Pe}function H(Pe,xe){var Ee=xe[0]-Pe[0],Ae=xe[1]-Pe[1],Le=xe[2]-Pe[2],ye=xe[3]-Pe[3];return Math.sqrt(Ee*Ee+Ae*Ae+Le*Le+ye*ye)}function G(Pe,xe){var Ee=xe[0]-Pe[0],Ae=xe[1]-Pe[1],Le=xe[2]-Pe[2],ye=xe[3]-Pe[3];return Ee*Ee+Ae*Ae+Le*Le+ye*ye}function Q(Pe){var xe=Pe[0],Ee=Pe[1],Ae=Pe[2],Le=Pe[3];return Math.sqrt(xe*xe+Ee*Ee+Ae*Ae+Le*Le)}function K(Pe){var xe=Pe[0],Ee=Pe[1],Ae=Pe[2],Le=Pe[3];return xe*xe+Ee*Ee+Ae*Ae+Le*Le}function J(Pe,xe){var Ee=xe[0],Ae=xe[1],Le=xe[2],ye=xe[3],Se=Ee*Ee+Ae*Ae+Le*Le+ye*ye;return 0<Se&&(Se=1/Math.sqrt(Se),Pe[0]=Ee*Se,Pe[1]=Ae*Se,Pe[2]=Le*Se,Pe[3]=ye*Se),Pe}Object.defineProperty(n,'__esModule',{value:!0}),n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0,n.create=P,n.clone=function(Pe){var xe=new le.ARRAY_TYPE(4);return xe[0]=Pe[0],xe[1]=Pe[1],xe[2]=Pe[2],xe[3]=Pe[3],xe},n.fromValues=function(Pe,xe,Ee,Ae){var Le=new le.ARRAY_TYPE(4);return Le[0]=Pe,Le[1]=xe,Le[2]=Ee,Le[3]=Ae,Le},n.copy=function(Pe,xe){return Pe[0]=xe[0],Pe[1]=xe[1],Pe[2]=xe[2],Pe[3]=xe[3],Pe},n.set=function(Pe,xe,Ee,Ae,Le){return Pe[0]=xe,Pe[1]=Ee,Pe[2]=Ae,Pe[3]=Le,Pe},n.add=function(Pe,xe,Ee){return Pe[0]=xe[0]+Ee[0],Pe[1]=xe[1]+Ee[1],Pe[2]=xe[2]+Ee[2],Pe[3]=xe[3]+Ee[3],Pe},n.subtract=O,n.multiply=N,n.divide=M,n.ceil=function(Pe,xe){return Pe[0]=Math.ceil(xe[0]),Pe[1]=Math.ceil(xe[1]),Pe[2]=Math.ceil(xe[2]),Pe[3]=Math.ceil(xe[3]),Pe},n.floor=function(Pe,xe){return Pe[0]=Math.floor(xe[0]),Pe[1]=Math.floor(xe[1]),Pe[2]=Math.floor(xe[2]),Pe[3]=Math.floor(xe[3]),Pe},n.min=function(Pe,xe,Ee){return Pe[0]=Math.min(xe[0],Ee[0]),Pe[1]=Math.min(xe[1],Ee[1]),Pe[2]=Math.min(xe[2],Ee[2]),Pe[3]=Math.min(xe[3],Ee[3]),Pe},n.max=function(Pe,xe,Ee){return Pe[0]=Math.max(xe[0],Ee[0]),Pe[1]=Math.max(xe[1],Ee[1]),Pe[2]=Math.max(xe[2],Ee[2]),Pe[3]=Math.max(xe[3],Ee[3]),Pe},n.round=function(Pe,xe){return Pe[0]=Math.round(xe[0]),Pe[1]=Math.round(xe[1]),Pe[2]=Math.round(xe[2]),Pe[3]=Math.round(xe[3]),Pe},n.scale=W,n.scaleAndAdd=function(Pe,xe,Ee,Ae){return Pe[0]=xe[0]+Ee[0]*Ae,Pe[1]=xe[1]+Ee[1]*Ae,Pe[2]=xe[2]+Ee[2]*Ae,Pe[3]=xe[3]+Ee[3]*Ae,Pe},n.distance=H,n.squaredDistance=G,n.length=Q,n.squaredLength=K,n.negate=function(Pe,xe){return Pe[0]=-xe[0],Pe[1]=-xe[1],Pe[2]=-xe[2],Pe[3]=-xe[3],Pe},n.inverse=function(Pe,xe){return Pe[0]=1/xe[0],Pe[1]=1/xe[1],Pe[2]=1/xe[2],Pe[3]=1/xe[3],Pe},n.normalize=J,n.dot=function(Pe,xe){return Pe[0]*xe[0]+Pe[1]*xe[1]+Pe[2]*xe[2]+Pe[3]*xe[3]},n.lerp=function(Pe,xe,Ee,Ae){var Le=xe[0],ye=xe[1],Se=xe[2],Re=xe[3];return Pe[0]=Le+Ae*(Ee[0]-Le),Pe[1]=ye+Ae*(Ee[1]-ye),Pe[2]=Se+Ae*(Ee[2]-Se),Pe[3]=Re+Ae*(Ee[3]-Re),Pe},n.random=function(Pe,xe){return xe=xe||1,Pe[0]=le.RANDOM(),Pe[1]=le.RANDOM(),Pe[2]=le.RANDOM(),Pe[3]=le.RANDOM(),J(Pe,Pe),W(Pe,Pe,xe),Pe},n.transformMat4=function(Pe,xe,Ee){var Ae=xe[0],Le=xe[1],ye=xe[2],Se=xe[3];return Pe[0]=Ee[0]*Ae+Ee[4]*Le+Ee[8]*ye+Ee[12]*Se,Pe[1]=Ee[1]*Ae+Ee[5]*Le+Ee[9]*ye+Ee[13]*Se,Pe[2]=Ee[2]*Ae+Ee[6]*Le+Ee[10]*ye+Ee[14]*Se,Pe[3]=Ee[3]*Ae+Ee[7]*Le+Ee[11]*ye+Ee[15]*Se,Pe},n.transformQuat=function(Pe,xe,Ee){var Ae=xe[0],Le=xe[1],ye=xe[2],Se=Ee[0],Re=Ee[1],_e=Ee[2],Ie=Ee[3],he=Ie*Ae+Re*ye-_e*Le,Oe=Ie*Le+_e*Ae-Se*ye,qe=Ie*ye+Se*Le-Re*Ae,Ne=-Se*Ae-Re*Le-_e*ye;return Pe[0]=he*Ie+Ne*-Se+Oe*-_e-qe*-Re,Pe[1]=Oe*Ie+Ne*-Re+qe*-Se-he*-_e,Pe[2]=qe*Ie+Ne*-_e+he*-Re-Oe*-Se,Pe[3]=xe[3],Pe},n.str=function(Pe){return'vec4('+Pe[0]+', '+Pe[1]+', '+Pe[2]+', '+Pe[3]+')'},n.exactEquals=function(Pe,xe){return Pe[0]===xe[0]&&Pe[1]===xe[1]&&Pe[2]===xe[2]&&Pe[3]===xe[3]},n.equals=function(Pe,xe){var Ee=Pe[0],Ae=Pe[1],Le=Pe[2],ye=Pe[3],Se=xe[0],Re=xe[1],_e=xe[2],Ie=xe[3];return Math.abs(Ee-Se)<=le.EPSILON*Math.max(1,Math.abs(Ee),Math.abs(Se))&&Math.abs(Ae-Re)<=le.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(Re))&&Math.abs(Le-_e)<=le.EPSILON*Math.max(1,Math.abs(Le),Math.abs(_e))&&Math.abs(ye-Ie)<=le.EPSILON*Math.max(1,Math.abs(ye),Math.abs(Ie))};var ie=u(0),le=function(Pe){if(Pe&&Pe.__esModule)return Pe;var xe={};if(null!=Pe)for(var Ee in Pe)Object.prototype.hasOwnProperty.call(Pe,Ee)&&(xe[Ee]=Pe[Ee]);return xe.default=Pe,xe}(ie),de=n.sub=O,ue=n.mul=N,ce=n.div=M,me=n.dist=H,be=n.sqrDist=G,fe=n.len=Q,pe=n.sqrLen=K,ge=n.forEach=function(){var Pe=P();return function(xe,Ee,Ae,Le,ye,Se){var Re,_e;for(Ee||(Ee=4),Ae||(Ae=0),_e=Le?Math.min(Le*Ee+Ae,xe.length):xe.length,Re=Ae;Re<_e;Re+=Ee)Pe[0]=xe[Re],Pe[1]=xe[Re+1],Pe[2]=xe[Re+2],Pe[3]=xe[Re+3],ye(Pe,Pe,Se),xe[Re]=Pe[0],xe[Re+1]=Pe[1],xe[Re+2]=Pe[2],xe[Re+3]=Pe[3];return xe}}()},function(e,n,u){'use strict';function g(Q){if(Q&&Q.__esModule)return Q;var K={};if(null!=Q)for(var X in Q)Object.prototype.hasOwnProperty.call(Q,X)&&(K[X]=Q[X]);return K.default=Q,K}Object.defineProperty(n,'__esModule',{value:!0}),n.vec4=n.vec3=n.vec2=n.quat=n.mat4=n.mat3=n.mat2d=n.mat2=n.glMatrix=void 0;var P=u(0),E=g(P),A=u(5),R=g(A),_=u(6),I=g(_),O=u(1),N=g(O),M=u(7),T=g(M),Y=u(8),B=g(Y),C=u(9),F=g(C),W=u(2),V=g(W),H=u(3),G=g(H);n.glMatrix=E,n.mat2=R,n.mat2d=I,n.mat3=N,n.mat4=T,n.quat=B,n.vec2=F,n.vec3=V,n.vec4=G},function(e,n,u){'use strict';function Y(te,se,ne){var ie=se[0],le=se[1],de=se[2],ue=se[3],ce=ne[0],me=ne[1],be=ne[2],fe=ne[3];return te[0]=ie*ce+de*me,te[1]=le*ce+ue*me,te[2]=ie*be+de*fe,te[3]=le*be+ue*fe,te}function K(te,se,ne){return te[0]=se[0]-ne[0],te[1]=se[1]-ne[1],te[2]=se[2]-ne[2],te[3]=se[3]-ne[3],te}Object.defineProperty(n,'__esModule',{value:!0}),n.sub=n.mul=void 0,n.create=function(){var te=new ae.ARRAY_TYPE(4);return te[0]=1,te[1]=0,te[2]=0,te[3]=1,te},n.clone=function(te){var se=new ae.ARRAY_TYPE(4);return se[0]=te[0],se[1]=te[1],se[2]=te[2],se[3]=te[3],se},n.copy=function(te,se){return te[0]=se[0],te[1]=se[1],te[2]=se[2],te[3]=se[3],te},n.identity=function(te){return te[0]=1,te[1]=0,te[2]=0,te[3]=1,te},n.fromValues=function(te,se,ne,ie){var le=new ae.ARRAY_TYPE(4);return le[0]=te,le[1]=se,le[2]=ne,le[3]=ie,le},n.set=function(te,se,ne,ie,le){return te[0]=se,te[1]=ne,te[2]=ie,te[3]=le,te},n.transpose=function(te,se){if(te===se){var ne=se[1];te[1]=se[2],te[2]=ne}else te[0]=se[0],te[1]=se[2],te[2]=se[1],te[3]=se[3];return te},n.invert=function(te,se){var ne=se[0],ie=se[1],le=se[2],de=se[3],ue=ne*de-le*ie;return ue?(ue=1/ue,te[0]=de*ue,te[1]=-ie*ue,te[2]=-le*ue,te[3]=ne*ue,te):null},n.adjoint=function(te,se){var ne=se[0];return te[0]=se[3],te[1]=-se[1],te[2]=-se[2],te[3]=ne,te},n.determinant=function(te){return te[0]*te[3]-te[2]*te[1]},n.multiply=Y,n.rotate=function(te,se,ne){var ie=se[0],le=se[1],de=se[2],ue=se[3],ce=Math.sin(ne),me=Math.cos(ne);return te[0]=ie*me+de*ce,te[1]=le*me+ue*ce,te[2]=ie*-ce+de*me,te[3]=le*-ce+ue*me,te},n.scale=function(te,se,ne){var ie=se[0],le=se[1],de=se[2],ue=se[3],ce=ne[0],me=ne[1];return te[0]=ie*ce,te[1]=le*ce,te[2]=de*me,te[3]=ue*me,te},n.fromRotation=function(te,se){var ne=Math.sin(se),ie=Math.cos(se);return te[0]=ie,te[1]=ne,te[2]=-ne,te[3]=ie,te},n.fromScaling=function(te,se){return te[0]=se[0],te[1]=0,te[2]=0,te[3]=se[1],te},n.str=function(te){return'mat2('+te[0]+', '+te[1]+', '+te[2]+', '+te[3]+')'},n.frob=function(te){return Math.sqrt(Math.pow(te[0],2)+Math.pow(te[1],2)+Math.pow(te[2],2)+Math.pow(te[3],2))},n.LDU=function(te,se,ne,ie){return te[2]=ie[2]/ie[0],ne[0]=ie[0],ne[1]=ie[1],ne[3]=ie[3]-te[2]*ne[1],[te,se,ne]},n.add=function(te,se,ne){return te[0]=se[0]+ne[0],te[1]=se[1]+ne[1],te[2]=se[2]+ne[2],te[3]=se[3]+ne[3],te},n.subtract=K,n.exactEquals=function(te,se){return te[0]===se[0]&&te[1]===se[1]&&te[2]===se[2]&&te[3]===se[3]},n.equals=function(te,se){var ne=te[0],ie=te[1],le=te[2],de=te[3],ue=se[0],ce=se[1],me=se[2],be=se[3];return Math.abs(ne-ue)<=ae.EPSILON*Math.max(1,Math.abs(ne),Math.abs(ue))&&Math.abs(ie-ce)<=ae.EPSILON*Math.max(1,Math.abs(ie),Math.abs(ce))&&Math.abs(le-me)<=ae.EPSILON*Math.max(1,Math.abs(le),Math.abs(me))&&Math.abs(de-be)<=ae.EPSILON*Math.max(1,Math.abs(de),Math.abs(be))},n.multiplyScalar=function(te,se,ne){return te[0]=se[0]*ne,te[1]=se[1]*ne,te[2]=se[2]*ne,te[3]=se[3]*ne,te},n.multiplyScalarAndAdd=function(te,se,ne,ie){return te[0]=se[0]+ne[0]*ie,te[1]=se[1]+ne[1]*ie,te[2]=se[2]+ne[2]*ie,te[3]=se[3]+ne[3]*ie,te};var ee=u(0),ae=function(te){if(te&&te.__esModule)return te;var se={};if(null!=te)for(var ne in te)Object.prototype.hasOwnProperty.call(te,ne)&&(se[ne]=te[ne]);return se.default=te,se}(ee),re=n.mul=Y,oe=n.sub=K},function(e,n,u){'use strict';function M(oe,te,se){var ne=te[0],ie=te[1],le=te[2],de=te[3],ue=te[4],ce=te[5],me=se[0],be=se[1],fe=se[2],pe=se[3],ge=se[4],Pe=se[5];return oe[0]=ne*me+le*be,oe[1]=ie*me+de*be,oe[2]=ne*fe+le*pe,oe[3]=ie*fe+de*pe,oe[4]=ne*ge+le*Pe+ue,oe[5]=ie*ge+de*Pe+ce,oe}function Q(oe,te,se){return oe[0]=te[0]-se[0],oe[1]=te[1]-se[1],oe[2]=te[2]-se[2],oe[3]=te[3]-se[3],oe[4]=te[4]-se[4],oe[5]=te[5]-se[5],oe}Object.defineProperty(n,'__esModule',{value:!0}),n.sub=n.mul=void 0,n.create=function(){var oe=new ee.ARRAY_TYPE(6);return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=1,oe[4]=0,oe[5]=0,oe},n.clone=function(oe){var te=new ee.ARRAY_TYPE(6);return te[0]=oe[0],te[1]=oe[1],te[2]=oe[2],te[3]=oe[3],te[4]=oe[4],te[5]=oe[5],te},n.copy=function(oe,te){return oe[0]=te[0],oe[1]=te[1],oe[2]=te[2],oe[3]=te[3],oe[4]=te[4],oe[5]=te[5],oe},n.identity=function(oe){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=1,oe[4]=0,oe[5]=0,oe},n.fromValues=function(oe,te,se,ne,ie,le){var de=new ee.ARRAY_TYPE(6);return de[0]=oe,de[1]=te,de[2]=se,de[3]=ne,de[4]=ie,de[5]=le,de},n.set=function(oe,te,se,ne,ie,le,de){return oe[0]=te,oe[1]=se,oe[2]=ne,oe[3]=ie,oe[4]=le,oe[5]=de,oe},n.invert=function(oe,te){var se=te[0],ne=te[1],ie=te[2],le=te[3],de=te[4],ue=te[5],ce=se*le-ne*ie;return ce?(ce=1/ce,oe[0]=le*ce,oe[1]=-ne*ce,oe[2]=-ie*ce,oe[3]=se*ce,oe[4]=(ie*ue-le*de)*ce,oe[5]=(ne*de-se*ue)*ce,oe):null},n.determinant=function(oe){return oe[0]*oe[3]-oe[1]*oe[2]},n.multiply=M,n.rotate=function(oe,te,se){var ne=te[0],ie=te[1],le=te[2],de=te[3],ue=te[4],ce=te[5],me=Math.sin(se),be=Math.cos(se);return oe[0]=ne*be+le*me,oe[1]=ie*be+de*me,oe[2]=ne*-me+le*be,oe[3]=ie*-me+de*be,oe[4]=ue,oe[5]=ce,oe},n.scale=function(oe,te,se){var ne=te[0],ie=te[1],le=te[2],de=te[3],ue=te[4],ce=te[5],me=se[0],be=se[1];return oe[0]=ne*me,oe[1]=ie*me,oe[2]=le*be,oe[3]=de*be,oe[4]=ue,oe[5]=ce,oe},n.translate=function(oe,te,se){var ne=te[0],ie=te[1],le=te[2],de=te[3],ue=te[4],ce=te[5],me=se[0],be=se[1];return oe[0]=ne,oe[1]=ie,oe[2]=le,oe[3]=de,oe[4]=ne*me+le*be+ue,oe[5]=ie*me+de*be+ce,oe},n.fromRotation=function(oe,te){var se=Math.sin(te),ne=Math.cos(te);return oe[0]=ne,oe[1]=se,oe[2]=-se,oe[3]=ne,oe[4]=0,oe[5]=0,oe},n.fromScaling=function(oe,te){return oe[0]=te[0],oe[1]=0,oe[2]=0,oe[3]=te[1],oe[4]=0,oe[5]=0,oe},n.fromTranslation=function(oe,te){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=1,oe[4]=te[0],oe[5]=te[1],oe},n.str=function(oe){return'mat2d('+oe[0]+', '+oe[1]+', '+oe[2]+', '+oe[3]+', '+oe[4]+', '+oe[5]+')'},n.frob=function(oe){return Math.sqrt(Math.pow(oe[0],2)+Math.pow(oe[1],2)+Math.pow(oe[2],2)+Math.pow(oe[3],2)+Math.pow(oe[4],2)+Math.pow(oe[5],2)+1)},n.add=function(oe,te,se){return oe[0]=te[0]+se[0],oe[1]=te[1]+se[1],oe[2]=te[2]+se[2],oe[3]=te[3]+se[3],oe[4]=te[4]+se[4],oe[5]=te[5]+se[5],oe},n.subtract=Q,n.multiplyScalar=function(oe,te,se){return oe[0]=te[0]*se,oe[1]=te[1]*se,oe[2]=te[2]*se,oe[3]=te[3]*se,oe[4]=te[4]*se,oe[5]=te[5]*se,oe},n.multiplyScalarAndAdd=function(oe,te,se,ne){return oe[0]=te[0]+se[0]*ne,oe[1]=te[1]+se[1]*ne,oe[2]=te[2]+se[2]*ne,oe[3]=te[3]+se[3]*ne,oe[4]=te[4]+se[4]*ne,oe[5]=te[5]+se[5]*ne,oe},n.exactEquals=function(oe,te){return oe[0]===te[0]&&oe[1]===te[1]&&oe[2]===te[2]&&oe[3]===te[3]&&oe[4]===te[4]&&oe[5]===te[5]},n.equals=function(oe,te){var se=oe[0],ne=oe[1],ie=oe[2],le=oe[3],de=oe[4],ue=oe[5],ce=te[0],me=te[1],be=te[2],fe=te[3],pe=te[4],ge=te[5];return Math.abs(se-ce)<=ee.EPSILON*Math.max(1,Math.abs(se),Math.abs(ce))&&Math.abs(ne-me)<=ee.EPSILON*Math.max(1,Math.abs(ne),Math.abs(me))&&Math.abs(ie-be)<=ee.EPSILON*Math.max(1,Math.abs(ie),Math.abs(be))&&Math.abs(le-fe)<=ee.EPSILON*Math.max(1,Math.abs(le),Math.abs(fe))&&Math.abs(de-pe)<=ee.EPSILON*Math.max(1,Math.abs(de),Math.abs(pe))&&Math.abs(ue-ge)<=ee.EPSILON*Math.max(1,Math.abs(ue),Math.abs(ge))};var $=u(0),ee=function(oe){if(oe&&oe.__esModule)return oe;var te={};if(null!=oe)for(var se in oe)Object.prototype.hasOwnProperty.call(oe,se)&&(te[se]=oe[se]);return te.default=oe,te}($),ae=n.mul=M,re=n.sub=Q},function(e,n,u){'use strict';function Y(Re,_e,Ie){var he=_e[0],Oe=_e[1],qe=_e[2],Ne=_e[3],we=_e[4],Me=_e[5],Te=_e[6],ve=_e[7],Ye=_e[8],Be=_e[9],Ce=_e[10],De=_e[11],ke=_e[12],Fe=_e[13],Ue=_e[14],We=_e[15],Ve=Ie[0],He=Ie[1],je=Ie[2],ze=Ie[3];return Re[0]=Ve*he+He*we+je*Ye+ze*ke,Re[1]=Ve*Oe+He*Me+je*Be+ze*Fe,Re[2]=Ve*qe+He*Te+je*Ce+ze*Ue,Re[3]=Ve*Ne+He*ve+je*De+ze*We,Ve=Ie[4],He=Ie[5],je=Ie[6],ze=Ie[7],Re[4]=Ve*he+He*we+je*Ye+ze*ke,Re[5]=Ve*Oe+He*Me+je*Be+ze*Fe,Re[6]=Ve*qe+He*Te+je*Ce+ze*Ue,Re[7]=Ve*Ne+He*ve+je*De+ze*We,Ve=Ie[8],He=Ie[9],je=Ie[10],ze=Ie[11],Re[8]=Ve*he+He*we+je*Ye+ze*ke,Re[9]=Ve*Oe+He*Me+je*Be+ze*Fe,Re[10]=Ve*qe+He*Te+je*Ce+ze*Ue,Re[11]=Ve*Ne+He*ve+je*De+ze*We,Ve=Ie[12],He=Ie[13],je=Ie[14],ze=Ie[15],Re[12]=Ve*he+He*we+je*Ye+ze*ke,Re[13]=Ve*Oe+He*Me+je*Be+ze*Fe,Re[14]=Ve*qe+He*Te+je*Ce+ze*Ue,Re[15]=Ve*Ne+He*ve+je*De+ze*We,Re}function pe(Re,_e,Ie){return Re[0]=_e[0]-Ie[0],Re[1]=_e[1]-Ie[1],Re[2]=_e[2]-Ie[2],Re[3]=_e[3]-Ie[3],Re[4]=_e[4]-Ie[4],Re[5]=_e[5]-Ie[5],Re[6]=_e[6]-Ie[6],Re[7]=_e[7]-Ie[7],Re[8]=_e[8]-Ie[8],Re[9]=_e[9]-Ie[9],Re[10]=_e[10]-Ie[10],Re[11]=_e[11]-Ie[11],Re[12]=_e[12]-Ie[12],Re[13]=_e[13]-Ie[13],Re[14]=_e[14]-Ie[14],Re[15]=_e[15]-Ie[15],Re}Object.defineProperty(n,'__esModule',{value:!0}),n.sub=n.mul=void 0,n.create=function(){var Re=new Le.ARRAY_TYPE(16);return Re[0]=1,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=1,Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=1,Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re},n.clone=function(Re){var _e=new Le.ARRAY_TYPE(16);return _e[0]=Re[0],_e[1]=Re[1],_e[2]=Re[2],_e[3]=Re[3],_e[4]=Re[4],_e[5]=Re[5],_e[6]=Re[6],_e[7]=Re[7],_e[8]=Re[8],_e[9]=Re[9],_e[10]=Re[10],_e[11]=Re[11],_e[12]=Re[12],_e[13]=Re[13],_e[14]=Re[14],_e[15]=Re[15],_e},n.copy=function(Re,_e){return Re[0]=_e[0],Re[1]=_e[1],Re[2]=_e[2],Re[3]=_e[3],Re[4]=_e[4],Re[5]=_e[5],Re[6]=_e[6],Re[7]=_e[7],Re[8]=_e[8],Re[9]=_e[9],Re[10]=_e[10],Re[11]=_e[11],Re[12]=_e[12],Re[13]=_e[13],Re[14]=_e[14],Re[15]=_e[15],Re},n.fromValues=function(Re,_e,Ie,he,Oe,qe,Ne,we,Me,Te,ve,Ye,Be,Ce,De,ke){var Fe=new Le.ARRAY_TYPE(16);return Fe[0]=Re,Fe[1]=_e,Fe[2]=Ie,Fe[3]=he,Fe[4]=Oe,Fe[5]=qe,Fe[6]=Ne,Fe[7]=we,Fe[8]=Me,Fe[9]=Te,Fe[10]=ve,Fe[11]=Ye,Fe[12]=Be,Fe[13]=Ce,Fe[14]=De,Fe[15]=ke,Fe},n.set=function(Re,_e,Ie,he,Oe,qe,Ne,we,Me,Te,ve,Ye,Be,Ce,De,ke,Fe){return Re[0]=_e,Re[1]=Ie,Re[2]=he,Re[3]=Oe,Re[4]=qe,Re[5]=Ne,Re[6]=we,Re[7]=Me,Re[8]=Te,Re[9]=ve,Re[10]=Ye,Re[11]=Be,Re[12]=Ce,Re[13]=De,Re[14]=ke,Re[15]=Fe,Re},n.identity=function(Re){return Re[0]=1,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=1,Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=1,Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re},n.transpose=function(Re,_e){if(Re===_e){var Ie=_e[1],he=_e[2],Oe=_e[3],qe=_e[6],Ne=_e[7],we=_e[11];Re[1]=_e[4],Re[2]=_e[8],Re[3]=_e[12],Re[4]=Ie,Re[6]=_e[9],Re[7]=_e[13],Re[8]=he,Re[9]=qe,Re[11]=_e[14],Re[12]=Oe,Re[13]=Ne,Re[14]=we}else Re[0]=_e[0],Re[1]=_e[4],Re[2]=_e[8],Re[3]=_e[12],Re[4]=_e[1],Re[5]=_e[5],Re[6]=_e[9],Re[7]=_e[13],Re[8]=_e[2],Re[9]=_e[6],Re[10]=_e[10],Re[11]=_e[14],Re[12]=_e[3],Re[13]=_e[7],Re[14]=_e[11],Re[15]=_e[15];return Re},n.invert=function(Re,_e){var Ie=_e[0],he=_e[1],Oe=_e[2],qe=_e[3],Ne=_e[4],we=_e[5],Me=_e[6],Te=_e[7],ve=_e[8],Ye=_e[9],Be=_e[10],Ce=_e[11],De=_e[12],ke=_e[13],Fe=_e[14],Ue=_e[15],We=Ie*we-he*Ne,Ve=Ie*Me-Oe*Ne,He=Ie*Te-qe*Ne,je=he*Me-Oe*we,ze=he*Te-qe*we,Ge=Oe*Te-qe*Me,Qe=ve*ke-Ye*De,Ke=ve*Fe-Be*De,Xe=ve*Ue-Ce*De,Ze=Ye*Fe-Be*ke,Je=Ye*Ue-Ce*ke,$e=Be*Ue-Ce*Fe,ea=We*$e-Ve*Je+He*Ze+je*Xe-ze*Ke+Ge*Qe;return ea?(ea=1/ea,Re[0]=(we*$e-Me*Je+Te*Ze)*ea,Re[1]=(Oe*Je-he*$e-qe*Ze)*ea,Re[2]=(ke*Ge-Fe*ze+Ue*je)*ea,Re[3]=(Be*ze-Ye*Ge-Ce*je)*ea,Re[4]=(Me*Xe-Ne*$e-Te*Ke)*ea,Re[5]=(Ie*$e-Oe*Xe+qe*Ke)*ea,Re[6]=(Fe*He-De*Ge-Ue*Ve)*ea,Re[7]=(ve*Ge-Be*He+Ce*Ve)*ea,Re[8]=(Ne*Je-we*Xe+Te*Qe)*ea,Re[9]=(he*Xe-Ie*Je-qe*Qe)*ea,Re[10]=(De*ze-ke*He+Ue*We)*ea,Re[11]=(Ye*He-ve*ze-Ce*We)*ea,Re[12]=(we*Ke-Ne*Ze-Me*Qe)*ea,Re[13]=(Ie*Ze-he*Ke+Oe*Qe)*ea,Re[14]=(ke*Ve-De*je-Fe*We)*ea,Re[15]=(ve*je-Ye*Ve+Be*We)*ea,Re):null},n.adjoint=function(Re,_e){var Ie=_e[0],he=_e[1],Oe=_e[2],qe=_e[3],Ne=_e[4],we=_e[5],Me=_e[6],Te=_e[7],ve=_e[8],Ye=_e[9],Be=_e[10],Ce=_e[11],De=_e[12],ke=_e[13],Fe=_e[14],Ue=_e[15];return Re[0]=we*(Be*Ue-Ce*Fe)-Ye*(Me*Ue-Te*Fe)+ke*(Me*Ce-Te*Be),Re[1]=-(he*(Be*Ue-Ce*Fe)-Ye*(Oe*Ue-qe*Fe)+ke*(Oe*Ce-qe*Be)),Re[2]=he*(Me*Ue-Te*Fe)-we*(Oe*Ue-qe*Fe)+ke*(Oe*Te-qe*Me),Re[3]=-(he*(Me*Ce-Te*Be)-we*(Oe*Ce-qe*Be)+Ye*(Oe*Te-qe*Me)),Re[4]=-(Ne*(Be*Ue-Ce*Fe)-ve*(Me*Ue-Te*Fe)+De*(Me*Ce-Te*Be)),Re[5]=Ie*(Be*Ue-Ce*Fe)-ve*(Oe*Ue-qe*Fe)+De*(Oe*Ce-qe*Be),Re[6]=-(Ie*(Me*Ue-Te*Fe)-Ne*(Oe*Ue-qe*Fe)+De*(Oe*Te-qe*Me)),Re[7]=Ie*(Me*Ce-Te*Be)-Ne*(Oe*Ce-qe*Be)+ve*(Oe*Te-qe*Me),Re[8]=Ne*(Ye*Ue-Ce*ke)-ve*(we*Ue-Te*ke)+De*(we*Ce-Te*Ye),Re[9]=-(Ie*(Ye*Ue-Ce*ke)-ve*(he*Ue-qe*ke)+De*(he*Ce-qe*Ye)),Re[10]=Ie*(we*Ue-Te*ke)-Ne*(he*Ue-qe*ke)+De*(he*Te-qe*we),Re[11]=-(Ie*(we*Ce-Te*Ye)-Ne*(he*Ce-qe*Ye)+ve*(he*Te-qe*we)),Re[12]=-(Ne*(Ye*Fe-Be*ke)-ve*(we*Fe-Me*ke)+De*(we*Be-Me*Ye)),Re[13]=Ie*(Ye*Fe-Be*ke)-ve*(he*Fe-Oe*ke)+De*(he*Be-Oe*Ye),Re[14]=-(Ie*(we*Fe-Me*ke)-Ne*(he*Fe-Oe*ke)+De*(he*Me-Oe*we)),Re[15]=Ie*(we*Be-Me*Ye)-Ne*(he*Be-Oe*Ye)+ve*(he*Me-Oe*we),Re},n.determinant=function(Re){var _e=Re[0],Ie=Re[1],he=Re[2],Oe=Re[3],qe=Re[4],Ne=Re[5],we=Re[6],Me=Re[7],Te=Re[8],ve=Re[9],Ye=Re[10],Be=Re[11],Ce=Re[12],De=Re[13],ke=Re[14],Fe=Re[15];return(_e*Ne-Ie*qe)*(Ye*Fe-Be*ke)-(_e*we-he*qe)*(ve*Fe-Be*De)+(_e*Me-Oe*qe)*(ve*ke-Ye*De)+(Ie*we-he*Ne)*(Te*Fe-Be*Ce)-(Ie*Me-Oe*Ne)*(Te*ke-Ye*Ce)+(he*Me-Oe*we)*(Te*De-ve*Ce)},n.multiply=Y,n.translate=function(Re,_e,Ie){var Ne,we,Me,Te,ve,Ye,Be,Ce,De,ke,Fe,Ue,he=Ie[0],Oe=Ie[1],qe=Ie[2];return _e===Re?(Re[12]=_e[0]*he+_e[4]*Oe+_e[8]*qe+_e[12],Re[13]=_e[1]*he+_e[5]*Oe+_e[9]*qe+_e[13],Re[14]=_e[2]*he+_e[6]*Oe+_e[10]*qe+_e[14],Re[15]=_e[3]*he+_e[7]*Oe+_e[11]*qe+_e[15]):(Ne=_e[0],we=_e[1],Me=_e[2],Te=_e[3],ve=_e[4],Ye=_e[5],Be=_e[6],Ce=_e[7],De=_e[8],ke=_e[9],Fe=_e[10],Ue=_e[11],Re[0]=Ne,Re[1]=we,Re[2]=Me,Re[3]=Te,Re[4]=ve,Re[5]=Ye,Re[6]=Be,Re[7]=Ce,Re[8]=De,Re[9]=ke,Re[10]=Fe,Re[11]=Ue,Re[12]=Ne*he+ve*Oe+De*qe+_e[12],Re[13]=we*he+Ye*Oe+ke*qe+_e[13],Re[14]=Me*he+Be*Oe+Fe*qe+_e[14],Re[15]=Te*he+Ce*Oe+Ue*qe+_e[15]),Re},n.scale=function(Re,_e,Ie){var he=Ie[0],Oe=Ie[1],qe=Ie[2];return Re[0]=_e[0]*he,Re[1]=_e[1]*he,Re[2]=_e[2]*he,Re[3]=_e[3]*he,Re[4]=_e[4]*Oe,Re[5]=_e[5]*Oe,Re[6]=_e[6]*Oe,Re[7]=_e[7]*Oe,Re[8]=_e[8]*qe,Re[9]=_e[9]*qe,Re[10]=_e[10]*qe,Re[11]=_e[11]*qe,Re[12]=_e[12],Re[13]=_e[13],Re[14]=_e[14],Re[15]=_e[15],Re},n.rotate=function(Re,_e,Ie,he){var Me,Te,ve,Ye,Be,Ce,De,ke,Fe,Ue,We,Ve,He,je,ze,Ge,Qe,Ke,Xe,Ze,Je,$e,ea,ra,Oe=he[0],qe=he[1],Ne=he[2],we=Math.sqrt(Oe*Oe+qe*qe+Ne*Ne);return Math.abs(we)<Le.EPSILON?null:(we=1/we,Oe*=we,qe*=we,Ne*=we,Me=Math.sin(Ie),Te=Math.cos(Ie),ve=1-Te,Ye=_e[0],Be=_e[1],Ce=_e[2],De=_e[3],ke=_e[4],Fe=_e[5],Ue=_e[6],We=_e[7],Ve=_e[8],He=_e[9],je=_e[10],ze=_e[11],Ge=Oe*Oe*ve+Te,Qe=qe*Oe*ve+Ne*Me,Ke=Ne*Oe*ve-qe*Me,Xe=Oe*qe*ve-Ne*Me,Ze=qe*qe*ve+Te,Je=Ne*qe*ve+Oe*Me,$e=Oe*Ne*ve+qe*Me,ea=qe*Ne*ve-Oe*Me,ra=Ne*Ne*ve+Te,Re[0]=Ye*Ge+ke*Qe+Ve*Ke,Re[1]=Be*Ge+Fe*Qe+He*Ke,Re[2]=Ce*Ge+Ue*Qe+je*Ke,Re[3]=De*Ge+We*Qe+ze*Ke,Re[4]=Ye*Xe+ke*Ze+Ve*Je,Re[5]=Be*Xe+Fe*Ze+He*Je,Re[6]=Ce*Xe+Ue*Ze+je*Je,Re[7]=De*Xe+We*Ze+ze*Je,Re[8]=Ye*$e+ke*ea+Ve*ra,Re[9]=Be*$e+Fe*ea+He*ra,Re[10]=Ce*$e+Ue*ea+je*ra,Re[11]=De*$e+We*ea+ze*ra,_e!==Re&&(Re[12]=_e[12],Re[13]=_e[13],Re[14]=_e[14],Re[15]=_e[15]),Re)},n.rotateX=function(Re,_e,Ie){var he=Math.sin(Ie),Oe=Math.cos(Ie),qe=_e[4],Ne=_e[5],we=_e[6],Me=_e[7],Te=_e[8],ve=_e[9],Ye=_e[10],Be=_e[11];return _e!==Re&&(Re[0]=_e[0],Re[1]=_e[1],Re[2]=_e[2],Re[3]=_e[3],Re[12]=_e[12],Re[13]=_e[13],Re[14]=_e[14],Re[15]=_e[15]),Re[4]=qe*Oe+Te*he,Re[5]=Ne*Oe+ve*he,Re[6]=we*Oe+Ye*he,Re[7]=Me*Oe+Be*he,Re[8]=Te*Oe-qe*he,Re[9]=ve*Oe-Ne*he,Re[10]=Ye*Oe-we*he,Re[11]=Be*Oe-Me*he,Re},n.rotateY=function(Re,_e,Ie){var he=Math.sin(Ie),Oe=Math.cos(Ie),qe=_e[0],Ne=_e[1],we=_e[2],Me=_e[3],Te=_e[8],ve=_e[9],Ye=_e[10],Be=_e[11];return _e!==Re&&(Re[4]=_e[4],Re[5]=_e[5],Re[6]=_e[6],Re[7]=_e[7],Re[12]=_e[12],Re[13]=_e[13],Re[14]=_e[14],Re[15]=_e[15]),Re[0]=qe*Oe-Te*he,Re[1]=Ne*Oe-ve*he,Re[2]=we*Oe-Ye*he,Re[3]=Me*Oe-Be*he,Re[8]=qe*he+Te*Oe,Re[9]=Ne*he+ve*Oe,Re[10]=we*he+Ye*Oe,Re[11]=Me*he+Be*Oe,Re},n.rotateZ=function(Re,_e,Ie){var he=Math.sin(Ie),Oe=Math.cos(Ie),qe=_e[0],Ne=_e[1],we=_e[2],Me=_e[3],Te=_e[4],ve=_e[5],Ye=_e[6],Be=_e[7];return _e!==Re&&(Re[8]=_e[8],Re[9]=_e[9],Re[10]=_e[10],Re[11]=_e[11],Re[12]=_e[12],Re[13]=_e[13],Re[14]=_e[14],Re[15]=_e[15]),Re[0]=qe*Oe+Te*he,Re[1]=Ne*Oe+ve*he,Re[2]=we*Oe+Ye*he,Re[3]=Me*Oe+Be*he,Re[4]=Te*Oe-qe*he,Re[5]=ve*Oe-Ne*he,Re[6]=Ye*Oe-we*he,Re[7]=Be*Oe-Me*he,Re},n.fromTranslation=function(Re,_e){return Re[0]=1,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=1,Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=1,Re[11]=0,Re[12]=_e[0],Re[13]=_e[1],Re[14]=_e[2],Re[15]=1,Re},n.fromScaling=function(Re,_e){return Re[0]=_e[0],Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=_e[1],Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=_e[2],Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re},n.fromRotation=function(Re,_e,Ie){var we,Me,Te,he=Ie[0],Oe=Ie[1],qe=Ie[2],Ne=Math.sqrt(he*he+Oe*Oe+qe*qe);return Math.abs(Ne)<Le.EPSILON?null:(Ne=1/Ne,he*=Ne,Oe*=Ne,qe*=Ne,we=Math.sin(_e),Me=Math.cos(_e),Te=1-Me,Re[0]=he*he*Te+Me,Re[1]=Oe*he*Te+qe*we,Re[2]=qe*he*Te-Oe*we,Re[3]=0,Re[4]=he*Oe*Te-qe*we,Re[5]=Oe*Oe*Te+Me,Re[6]=qe*Oe*Te+he*we,Re[7]=0,Re[8]=he*qe*Te+Oe*we,Re[9]=Oe*qe*Te-he*we,Re[10]=qe*qe*Te+Me,Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re)},n.fromXRotation=function(Re,_e){var Ie=Math.sin(_e),he=Math.cos(_e);return Re[0]=1,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=he,Re[6]=Ie,Re[7]=0,Re[8]=0,Re[9]=-Ie,Re[10]=he,Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re},n.fromYRotation=function(Re,_e){var Ie=Math.sin(_e),he=Math.cos(_e);return Re[0]=he,Re[1]=0,Re[2]=-Ie,Re[3]=0,Re[4]=0,Re[5]=1,Re[6]=0,Re[7]=0,Re[8]=Ie,Re[9]=0,Re[10]=he,Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re},n.fromZRotation=function(Re,_e){var Ie=Math.sin(_e),he=Math.cos(_e);return Re[0]=he,Re[1]=Ie,Re[2]=0,Re[3]=0,Re[4]=-Ie,Re[5]=he,Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=1,Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re},n.fromRotationTranslation=function(Re,_e,Ie){var he=_e[0],Oe=_e[1],qe=_e[2],Ne=_e[3],we=he+he,Me=Oe+Oe,Te=qe+qe,ve=he*we,Ye=he*Me,Be=he*Te,Ce=Oe*Me,De=Oe*Te,ke=qe*Te,Fe=Ne*we,Ue=Ne*Me,We=Ne*Te;return Re[0]=1-(Ce+ke),Re[1]=Ye+We,Re[2]=Be-Ue,Re[3]=0,Re[4]=Ye-We,Re[5]=1-(ve+ke),Re[6]=De+Fe,Re[7]=0,Re[8]=Be+Ue,Re[9]=De-Fe,Re[10]=1-(ve+Ce),Re[11]=0,Re[12]=Ie[0],Re[13]=Ie[1],Re[14]=Ie[2],Re[15]=1,Re},n.getTranslation=function(Re,_e){return Re[0]=_e[12],Re[1]=_e[13],Re[2]=_e[14],Re},n.getScaling=function(Re,_e){var Ie=_e[0],he=_e[1],Oe=_e[2],qe=_e[4],Ne=_e[5],we=_e[6],Me=_e[8],Te=_e[9],ve=_e[10];return Re[0]=Math.sqrt(Ie*Ie+he*he+Oe*Oe),Re[1]=Math.sqrt(qe*qe+Ne*Ne+we*we),Re[2]=Math.sqrt(Me*Me+Te*Te+ve*ve),Re},n.getRotation=function(Re,_e){var Ie=_e[0]+_e[5]+_e[10],he=0;return 0<Ie?(he=2*Math.sqrt(Ie+1),Re[3]=0.25*he,Re[0]=(_e[6]-_e[9])/he,Re[1]=(_e[8]-_e[2])/he,Re[2]=(_e[1]-_e[4])/he):_e[0]>_e[5]&_e[0]>_e[10]?(he=2*Math.sqrt(1+_e[0]-_e[5]-_e[10]),Re[3]=(_e[6]-_e[9])/he,Re[0]=0.25*he,Re[1]=(_e[1]+_e[4])/he,Re[2]=(_e[8]+_e[2])/he):_e[5]>_e[10]?(he=2*Math.sqrt(1+_e[5]-_e[0]-_e[10]),Re[3]=(_e[8]-_e[2])/he,Re[0]=(_e[1]+_e[4])/he,Re[1]=0.25*he,Re[2]=(_e[6]+_e[9])/he):(he=2*Math.sqrt(1+_e[10]-_e[0]-_e[5]),Re[3]=(_e[1]-_e[4])/he,Re[0]=(_e[8]+_e[2])/he,Re[1]=(_e[6]+_e[9])/he,Re[2]=0.25*he),Re},n.fromRotationTranslationScale=function(Re,_e,Ie,he){var Oe=_e[0],qe=_e[1],Ne=_e[2],we=_e[3],Me=Oe+Oe,Te=qe+qe,ve=Ne+Ne,Ye=Oe*Me,Be=Oe*Te,Ce=Oe*ve,De=qe*Te,ke=qe*ve,Fe=Ne*ve,Ue=we*Me,We=we*Te,Ve=we*ve,He=he[0],je=he[1],ze=he[2];return Re[0]=(1-(De+Fe))*He,Re[1]=(Be+Ve)*He,Re[2]=(Ce-We)*He,Re[3]=0,Re[4]=(Be-Ve)*je,Re[5]=(1-(Ye+Fe))*je,Re[6]=(ke+Ue)*je,Re[7]=0,Re[8]=(Ce+We)*ze,Re[9]=(ke-Ue)*ze,Re[10]=(1-(Ye+De))*ze,Re[11]=0,Re[12]=Ie[0],Re[13]=Ie[1],Re[14]=Ie[2],Re[15]=1,Re},n.fromRotationTranslationScaleOrigin=function(Re,_e,Ie,he,Oe){var qe=_e[0],Ne=_e[1],we=_e[2],Me=_e[3],Te=qe+qe,ve=Ne+Ne,Ye=we+we,Be=qe*Te,Ce=qe*ve,De=qe*Ye,ke=Ne*ve,Fe=Ne*Ye,Ue=we*Ye,We=Me*Te,Ve=Me*ve,He=Me*Ye,je=he[0],ze=he[1],Ge=he[2],Qe=Oe[0],Ke=Oe[1],Xe=Oe[2];return Re[0]=(1-(ke+Ue))*je,Re[1]=(Ce+He)*je,Re[2]=(De-Ve)*je,Re[3]=0,Re[4]=(Ce-He)*ze,Re[5]=(1-(Be+Ue))*ze,Re[6]=(Fe+We)*ze,Re[7]=0,Re[8]=(De+Ve)*Ge,Re[9]=(Fe-We)*Ge,Re[10]=(1-(Be+ke))*Ge,Re[11]=0,Re[12]=Ie[0]+Qe-(Re[0]*Qe+Re[4]*Ke+Re[8]*Xe),Re[13]=Ie[1]+Ke-(Re[1]*Qe+Re[5]*Ke+Re[9]*Xe),Re[14]=Ie[2]+Xe-(Re[2]*Qe+Re[6]*Ke+Re[10]*Xe),Re[15]=1,Re},n.fromQuat=function(Re,_e){var Ie=_e[0],he=_e[1],Oe=_e[2],qe=_e[3],Ne=Ie+Ie,we=he+he,Me=Oe+Oe,Te=Ie*Ne,ve=he*Ne,Ye=he*we,Be=Oe*Ne,Ce=Oe*we,De=Oe*Me,ke=qe*Ne,Fe=qe*we,Ue=qe*Me;return Re[0]=1-Ye-De,Re[1]=ve+Ue,Re[2]=Be-Fe,Re[3]=0,Re[4]=ve-Ue,Re[5]=1-Te-De,Re[6]=Ce+ke,Re[7]=0,Re[8]=Be+Fe,Re[9]=Ce-ke,Re[10]=1-Te-Ye,Re[11]=0,Re[12]=0,Re[13]=0,Re[14]=0,Re[15]=1,Re},n.frustum=function(Re,_e,Ie,he,Oe,qe,Ne){var we=1/(Ie-_e),Me=1/(Oe-he),Te=1/(qe-Ne);return Re[0]=2*qe*we,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=2*qe*Me,Re[6]=0,Re[7]=0,Re[8]=(Ie+_e)*we,Re[9]=(Oe+he)*Me,Re[10]=(Ne+qe)*Te,Re[11]=-1,Re[12]=0,Re[13]=0,Re[14]=2*(Ne*qe)*Te,Re[15]=0,Re},n.perspective=function(Re,_e,Ie,he,Oe){var qe=1/Math.tan(_e/2),Ne=1/(he-Oe);return Re[0]=qe/Ie,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=qe,Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=(Oe+he)*Ne,Re[11]=-1,Re[12]=0,Re[13]=0,Re[14]=2*Oe*he*Ne,Re[15]=0,Re},n.perspectiveFromFieldOfView=function(Re,_e,Ie,he){var Oe=Math.tan(_e.upDegrees*Math.PI/180),qe=Math.tan(_e.downDegrees*Math.PI/180),Ne=Math.tan(_e.leftDegrees*Math.PI/180),we=Math.tan(_e.rightDegrees*Math.PI/180),Me=2/(Ne+we),Te=2/(Oe+qe);return Re[0]=Me,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=Te,Re[6]=0,Re[7]=0,Re[8]=-(0.5*((Ne-we)*Me)),Re[9]=0.5*((Oe-qe)*Te),Re[10]=he/(Ie-he),Re[11]=-1,Re[12]=0,Re[13]=0,Re[14]=he*Ie/(Ie-he),Re[15]=0,Re},n.ortho=function(Re,_e,Ie,he,Oe,qe,Ne){var we=1/(_e-Ie),Me=1/(he-Oe),Te=1/(qe-Ne);return Re[0]=-2*we,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=-2*Me,Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=2*Te,Re[11]=0,Re[12]=(_e+Ie)*we,Re[13]=(Oe+he)*Me,Re[14]=(Ne+qe)*Te,Re[15]=1,Re},n.lookAt=function(Re,_e,Ie,he){var Oe,qe,Ne,we,Me,Te,ve,Ye,Be,Ce,De=_e[0],ke=_e[1],Fe=_e[2],Ue=he[0],We=he[1],Ve=he[2],He=Ie[0],je=Ie[1],ze=Ie[2];return Math.abs(De-He)<Le.EPSILON&&Math.abs(ke-je)<Le.EPSILON&&Math.abs(Fe-ze)<Le.EPSILON?mat4.identity(Re):(ve=De-He,Ye=ke-je,Be=Fe-ze,Ce=1/Math.sqrt(ve*ve+Ye*Ye+Be*Be),ve*=Ce,Ye*=Ce,Be*=Ce,Oe=We*Be-Ve*Ye,qe=Ve*ve-Ue*Be,Ne=Ue*Ye-We*ve,Ce=Math.sqrt(Oe*Oe+qe*qe+Ne*Ne),Ce?(Ce=1/Ce,Oe*=Ce,qe*=Ce,Ne*=Ce):(Oe=0,qe=0,Ne=0),we=Ye*Ne-Be*qe,Me=Be*Oe-ve*Ne,Te=ve*qe-Ye*Oe,Ce=Math.sqrt(we*we+Me*Me+Te*Te),Ce?(Ce=1/Ce,we*=Ce,Me*=Ce,Te*=Ce):(we=0,Me=0,Te=0),Re[0]=Oe,Re[1]=we,Re[2]=ve,Re[3]=0,Re[4]=qe,Re[5]=Me,Re[6]=Ye,Re[7]=0,Re[8]=Ne,Re[9]=Te,Re[10]=Be,Re[11]=0,Re[12]=-(Oe*De+qe*ke+Ne*Fe),Re[13]=-(we*De+Me*ke+Te*Fe),Re[14]=-(ve*De+Ye*ke+Be*Fe),Re[15]=1,Re)},n.targetTo=function(Re,_e,Ie,he){var Oe=_e[0],qe=_e[1],Ne=_e[2],we=he[0],Me=he[1],Te=he[2],ve=Oe-Ie[0],Ye=qe-Ie[1],Be=Ne-Ie[2],Ce=ve*ve+Ye*Ye+Be*Be;0<Ce&&(Ce=1/Math.sqrt(Ce),ve*=Ce,Ye*=Ce,Be*=Ce);var De=Me*Be-Te*Ye,ke=Te*ve-we*Be,Fe=we*Ye-Me*ve;return Re[0]=De,Re[1]=ke,Re[2]=Fe,Re[3]=0,Re[4]=Ye*Fe-Be*ke,Re[5]=Be*De-ve*Fe,Re[6]=ve*ke-Ye*De,Re[7]=0,Re[8]=ve,Re[9]=Ye,Re[10]=Be,Re[11]=0,Re[12]=Oe,Re[13]=qe,Re[14]=Ne,Re[15]=1,Re},n.str=function(Re){return'mat4('+Re[0]+', '+Re[1]+', '+Re[2]+', '+Re[3]+', '+Re[4]+', '+Re[5]+', '+Re[6]+', '+Re[7]+', '+Re[8]+', '+Re[9]+', '+Re[10]+', '+Re[11]+', '+Re[12]+', '+Re[13]+', '+Re[14]+', '+Re[15]+')'},n.frob=function(Re){return Math.sqrt(Math.pow(Re[0],2)+Math.pow(Re[1],2)+Math.pow(Re[2],2)+Math.pow(Re[3],2)+Math.pow(Re[4],2)+Math.pow(Re[5],2)+Math.pow(Re[6],2)+Math.pow(Re[7],2)+Math.pow(Re[8],2)+Math.pow(Re[9],2)+Math.pow(Re[10],2)+Math.pow(Re[11],2)+Math.pow(Re[12],2)+Math.pow(Re[13],2)+Math.pow(Re[14],2)+Math.pow(Re[15],2))},n.add=function(Re,_e,Ie){return Re[0]=_e[0]+Ie[0],Re[1]=_e[1]+Ie[1],Re[2]=_e[2]+Ie[2],Re[3]=_e[3]+Ie[3],Re[4]=_e[4]+Ie[4],Re[5]=_e[5]+Ie[5],Re[6]=_e[6]+Ie[6],Re[7]=_e[7]+Ie[7],Re[8]=_e[8]+Ie[8],Re[9]=_e[9]+Ie[9],Re[10]=_e[10]+Ie[10],Re[11]=_e[11]+Ie[11],Re[12]=_e[12]+Ie[12],Re[13]=_e[13]+Ie[13],Re[14]=_e[14]+Ie[14],Re[15]=_e[15]+Ie[15],Re},n.subtract=pe,n.multiplyScalar=function(Re,_e,Ie){return Re[0]=_e[0]*Ie,Re[1]=_e[1]*Ie,Re[2]=_e[2]*Ie,Re[3]=_e[3]*Ie,Re[4]=_e[4]*Ie,Re[5]=_e[5]*Ie,Re[6]=_e[6]*Ie,Re[7]=_e[7]*Ie,Re[8]=_e[8]*Ie,Re[9]=_e[9]*Ie,Re[10]=_e[10]*Ie,Re[11]=_e[11]*Ie,Re[12]=_e[12]*Ie,Re[13]=_e[13]*Ie,Re[14]=_e[14]*Ie,Re[15]=_e[15]*Ie,Re},n.multiplyScalarAndAdd=function(Re,_e,Ie,he){return Re[0]=_e[0]+Ie[0]*he,Re[1]=_e[1]+Ie[1]*he,Re[2]=_e[2]+Ie[2]*he,Re[3]=_e[3]+Ie[3]*he,Re[4]=_e[4]+Ie[4]*he,Re[5]=_e[5]+Ie[5]*he,Re[6]=_e[6]+Ie[6]*he,Re[7]=_e[7]+Ie[7]*he,Re[8]=_e[8]+Ie[8]*he,Re[9]=_e[9]+Ie[9]*he,Re[10]=_e[10]+Ie[10]*he,Re[11]=_e[11]+Ie[11]*he,Re[12]=_e[12]+Ie[12]*he,Re[13]=_e[13]+Ie[13]*he,Re[14]=_e[14]+Ie[14]*he,Re[15]=_e[15]+Ie[15]*he,Re},n.exactEquals=function(Re,_e){return Re[0]===_e[0]&&Re[1]===_e[1]&&Re[2]===_e[2]&&Re[3]===_e[3]&&Re[4]===_e[4]&&Re[5]===_e[5]&&Re[6]===_e[6]&&Re[7]===_e[7]&&Re[8]===_e[8]&&Re[9]===_e[9]&&Re[10]===_e[10]&&Re[11]===_e[11]&&Re[12]===_e[12]&&Re[13]===_e[13]&&Re[14]===_e[14]&&Re[15]===_e[15]},n.equals=function(Re,_e){var Ie=Re[0],he=Re[1],Oe=Re[2],qe=Re[3],Ne=Re[4],we=Re[5],Me=Re[6],Te=Re[7],ve=Re[8],Ye=Re[9],Be=Re[10],Ce=Re[11],De=Re[12],ke=Re[13],Fe=Re[14],Ue=Re[15],We=_e[0],Ve=_e[1],He=_e[2],je=_e[3],ze=_e[4],Ge=_e[5],Qe=_e[6],Ke=_e[7],Xe=_e[8],Ze=_e[9],Je=_e[10],$e=_e[11],ea=_e[12],ra=_e[13],oa=_e[14],ta=_e[15];return Math.abs(Ie-We)<=Le.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(We))&&Math.abs(he-Ve)<=Le.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ve))&&Math.abs(Oe-He)<=Le.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(He))&&Math.abs(qe-je)<=Le.EPSILON*Math.max(1,Math.abs(qe),Math.abs(je))&&Math.abs(Ne-ze)<=Le.EPSILON*Math.max(1,Math.abs(Ne),Math.abs(ze))&&Math.abs(we-Ge)<=Le.EPSILON*Math.max(1,Math.abs(we),Math.abs(Ge))&&Math.abs(Me-Qe)<=Le.EPSILON*Math.max(1,Math.abs(Me),Math.abs(Qe))&&Math.abs(Te-Ke)<=Le.EPSILON*Math.max(1,Math.abs(Te),Math.abs(Ke))&&Math.abs(ve-Xe)<=Le.EPSILON*Math.max(1,Math.abs(ve),Math.abs(Xe))&&Math.abs(Ye-Ze)<=Le.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Ze))&&Math.abs(Be-Je)<=Le.EPSILON*Math.max(1,Math.abs(Be),Math.abs(Je))&&Math.abs(Ce-$e)<=Le.EPSILON*Math.max(1,Math.abs(Ce),Math.abs($e))&&Math.abs(De-ea)<=Le.EPSILON*Math.max(1,Math.abs(De),Math.abs(ea))&&Math.abs(ke-ra)<=Le.EPSILON*Math.max(1,Math.abs(ke),Math.abs(ra))&&Math.abs(Fe-oa)<=Le.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(oa))&&Math.abs(Ue-ta)<=Le.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(ta))};var Ae=u(0),Le=function(Re){if(Re&&Re.__esModule)return Re;var _e={};if(null!=Re)for(var Ie in Re)Object.prototype.hasOwnProperty.call(Re,Ie)&&(_e[Ie]=Re[Ie]);return _e.default=Re,_e}(Ae);var ye=n.mul=Y,Se=n.sub=pe},function(e,n,u){'use strict';function g(xe){if(xe&&xe.__esModule)return xe;var Ee={};if(null!=xe)for(var Ae in xe)Object.prototype.hasOwnProperty.call(xe,Ae)&&(Ee[Ae]=xe[Ae]);return Ee.default=xe,Ee}function P(){var xe=new H.ARRAY_TYPE(4);return xe[0]=0,xe[1]=0,xe[2]=0,xe[3]=1,xe}function A(xe,Ee,Ae){Ae*=0.5;var Le=Math.sin(Ae);return xe[0]=Le*Ee[0],xe[1]=Le*Ee[1],xe[2]=Le*Ee[2],xe[3]=Math.cos(Ae),xe}function _(xe,Ee,Ae){var Le=Ee[0],ye=Ee[1],Se=Ee[2],Re=Ee[3],_e=Ae[0],Ie=Ae[1],he=Ae[2],Oe=Ae[3];return xe[0]=Le*Oe+Re*_e+ye*he-Se*Ie,xe[1]=ye*Oe+Re*Ie+Se*_e-Le*he,xe[2]=Se*Oe+Re*he+Le*Ie-ye*_e,xe[3]=Re*Oe-Le*_e-ye*Ie-Se*he,xe}function T(xe,Ee,Ae,Le){var Ne,we,Me,Te,ve,ye=Ee[0],Se=Ee[1],Re=Ee[2],_e=Ee[3],Ie=Ae[0],he=Ae[1],Oe=Ae[2],qe=Ae[3];return we=ye*Ie+Se*he+Re*Oe+_e*qe,0>we&&(we=-we,Ie=-Ie,he=-he,Oe=-Oe,qe=-qe),1e-6<1-we?(Ne=Math.acos(we),Me=Math.sin(Ne),Te=Math.sin((1-Le)*Ne)/Me,ve=Math.sin(Le*Ne)/Me):(Te=1-Le,ve=Le),xe[0]=Te*ye+ve*Ie,xe[1]=Te*Se+ve*he,xe[2]=Te*Re+ve*Oe,xe[3]=Te*_e+ve*qe,xe}function C(xe,Ee){var Ae=Ee[0]+Ee[4]+Ee[8],Le;if(0<Ae)Le=Math.sqrt(Ae+1),xe[3]=0.5*Le,Le=0.5/Le,xe[0]=(Ee[5]-Ee[7])*Le,xe[1]=(Ee[6]-Ee[2])*Le,xe[2]=(Ee[1]-Ee[3])*Le;else{var ye=0;Ee[4]>Ee[0]&&(ye=1),Ee[8]>Ee[3*ye+ye]&&(ye=2);var Se=(ye+1)%3,Re=(ye+2)%3;Le=Math.sqrt(Ee[3*ye+ye]-Ee[3*Se+Se]-Ee[3*Re+Re]+1),xe[ye]=0.5*Le,Le=0.5/Le,xe[3]=(Ee[3*Se+Re]-Ee[3*Re+Se])*Le,xe[Se]=(Ee[3*Se+ye]+Ee[3*ye+Se])*Le,xe[Re]=(Ee[3*Re+ye]+Ee[3*ye+Re])*Le}return xe}Object.defineProperty(n,'__esModule',{value:!0}),n.setAxes=n.sqlerp=n.rotationTo=n.equals=n.exactEquals=n.normalize=n.sqrLen=n.squaredLength=n.len=n.length=n.lerp=n.dot=n.scale=n.mul=n.add=n.set=n.copy=n.fromValues=n.clone=void 0,n.create=P,n.identity=function(xe){return xe[0]=0,xe[1]=0,xe[2]=0,xe[3]=1,xe},n.setAxisAngle=A,n.getAxisAngle=function(xe,Ee){var Ae=2*Math.acos(Ee[3]),Le=Math.sin(Ae/2);return 0==Le?(xe[0]=1,xe[1]=0,xe[2]=0):(xe[0]=Ee[0]/Le,xe[1]=Ee[1]/Le,xe[2]=Ee[2]/Le),Ae},n.multiply=_,n.rotateX=function(xe,Ee,Ae){Ae*=0.5;var Le=Ee[0],ye=Ee[1],Se=Ee[2],Re=Ee[3],_e=Math.sin(Ae),Ie=Math.cos(Ae);return xe[0]=Le*Ie+Re*_e,xe[1]=ye*Ie+Se*_e,xe[2]=Se*Ie-ye*_e,xe[3]=Re*Ie-Le*_e,xe},n.rotateY=function(xe,Ee,Ae){Ae*=0.5;var Le=Ee[0],ye=Ee[1],Se=Ee[2],Re=Ee[3],_e=Math.sin(Ae),Ie=Math.cos(Ae);return xe[0]=Le*Ie-Se*_e,xe[1]=ye*Ie+Re*_e,xe[2]=Se*Ie+Le*_e,xe[3]=Re*Ie-ye*_e,xe},n.rotateZ=function(xe,Ee,Ae){Ae*=0.5;var Le=Ee[0],ye=Ee[1],Se=Ee[2],Re=Ee[3],_e=Math.sin(Ae),Ie=Math.cos(Ae);return xe[0]=Le*Ie+ye*_e,xe[1]=ye*Ie-Le*_e,xe[2]=Se*Ie+Re*_e,xe[3]=Re*Ie-Se*_e,xe},n.calculateW=function(xe,Ee){var Ae=Ee[0],Le=Ee[1],ye=Ee[2];return xe[0]=Ae,xe[1]=Le,xe[2]=ye,xe[3]=Math.sqrt(Math.abs(1-Ae*Ae-Le*Le-ye*ye)),xe},n.slerp=T,n.invert=function(xe,Ee){var Ae=Ee[0],Le=Ee[1],ye=Ee[2],Se=Ee[3],Re=Ae*Ae+Le*Le+ye*ye+Se*Se,_e=Re?1/Re:0;return xe[0]=-Ae*_e,xe[1]=-Le*_e,xe[2]=-ye*_e,xe[3]=Se*_e,xe},n.conjugate=function(xe,Ee){return xe[0]=-Ee[0],xe[1]=-Ee[1],xe[2]=-Ee[2],xe[3]=Ee[3],xe},n.fromMat3=C,n.fromEuler=function(xe,Ee,Ae,Le){var ye=0.5*Math.PI/180;Ee*=ye,Ae*=ye,Le*=ye;var Se=Math.sin(Ee),Re=Math.cos(Ee),_e=Math.sin(Ae),Ie=Math.cos(Ae),he=Math.sin(Le),Oe=Math.cos(Le);return xe[0]=Se*Ie*Oe-Re*_e*he,xe[1]=Re*_e*Oe+Se*Ie*he,xe[2]=Re*Ie*he-Se*_e*Oe,xe[3]=Re*Ie*Oe+Se*_e*he,xe},n.str=function(xe){return'quat('+xe[0]+', '+xe[1]+', '+xe[2]+', '+xe[3]+')'};var V=u(0),H=g(V),G=u(1),Q=g(G),K=u(2),X=g(K),Z=u(3),J=g(Z),$=n.clone=J.clone,ee=n.fromValues=J.fromValues,ae=n.copy=J.copy,re=n.set=J.set,oe=n.add=J.add,te=n.mul=_,se=n.scale=J.scale,ne=n.dot=J.dot,ie=n.lerp=J.lerp,le=n.length=J.length,de=n.len=le,ue=n.squaredLength=J.squaredLength,ce=n.sqrLen=ue,me=n.normalize=J.normalize,be=n.exactEquals=J.exactEquals,fe=n.equals=J.equals,pe=n.rotationTo=function(){var xe=X.create(),Ee=X.fromValues(1,0,0),Ae=X.fromValues(0,1,0);return function(Le,ye,Se){var Re=X.dot(ye,Se);return-0.999999>Re?(X.cross(xe,Ee,ye),1e-6>X.len(xe)&&X.cross(xe,Ae,ye),X.normalize(xe,xe),A(Le,xe,Math.PI),Le):0.999999<Re?(Le[0]=0,Le[1]=0,Le[2]=0,Le[3]=1,Le):(X.cross(xe,ye,Se),Le[0]=xe[0],Le[1]=xe[1],Le[2]=xe[2],Le[3]=1+Re,me(Le,Le))}}(),ge=n.sqlerp=function(){var xe=P(),Ee=P();return function(Ae,Le,ye,Se,Re,_e){return T(xe,Le,Re,_e),T(Ee,ye,Se,_e),T(Ae,xe,Ee,2*_e*(1-_e)),Ae}}(),Pe=n.setAxes=function(){var xe=Q.create();return function(Ee,Ae,Le,ye){return xe[0]=Le[0],xe[3]=Le[1],xe[6]=Le[2],xe[1]=ye[0],xe[4]=ye[1],xe[7]=ye[2],xe[2]=-Ae[0],xe[5]=-Ae[1],xe[8]=-Ae[2],me(Ee,C(Ee,xe))}}()},function(e,n,u){'use strict';function P(){var Ae=new ce.ARRAY_TYPE(2);return Ae[0]=0,Ae[1]=0,Ae}function O(Ae,Le,ye){return Ae[0]=Le[0]-ye[0],Ae[1]=Le[1]-ye[1],Ae}function N(Ae,Le,ye){return Ae[0]=Le[0]*ye[0],Ae[1]=Le[1]*ye[1],Ae}function M(Ae,Le,ye){return Ae[0]=Le[0]/ye[0],Ae[1]=Le[1]/ye[1],Ae}function H(Ae,Le){var ye=Le[0]-Ae[0],Se=Le[1]-Ae[1];return Math.sqrt(ye*ye+Se*Se)}function G(Ae,Le){var ye=Le[0]-Ae[0],Se=Le[1]-Ae[1];return ye*ye+Se*Se}function Q(Ae){var Le=Ae[0],ye=Ae[1];return Math.sqrt(Le*Le+ye*ye)}function K(Ae){var Le=Ae[0],ye=Ae[1];return Le*Le+ye*ye}Object.defineProperty(n,'__esModule',{value:!0}),n.forEach=n.sqrLen=n.sqrDist=n.dist=n.div=n.mul=n.sub=n.len=void 0,n.create=P,n.clone=function(Ae){var Le=new ce.ARRAY_TYPE(2);return Le[0]=Ae[0],Le[1]=Ae[1],Le},n.fromValues=function(Ae,Le){var ye=new ce.ARRAY_TYPE(2);return ye[0]=Ae,ye[1]=Le,ye},n.copy=function(Ae,Le){return Ae[0]=Le[0],Ae[1]=Le[1],Ae},n.set=function(Ae,Le,ye){return Ae[0]=Le,Ae[1]=ye,Ae},n.add=function(Ae,Le,ye){return Ae[0]=Le[0]+ye[0],Ae[1]=Le[1]+ye[1],Ae},n.subtract=O,n.multiply=N,n.divide=M,n.ceil=function(Ae,Le){return Ae[0]=Math.ceil(Le[0]),Ae[1]=Math.ceil(Le[1]),Ae},n.floor=function(Ae,Le){return Ae[0]=Math.floor(Le[0]),Ae[1]=Math.floor(Le[1]),Ae},n.min=function(Ae,Le,ye){return Ae[0]=Math.min(Le[0],ye[0]),Ae[1]=Math.min(Le[1],ye[1]),Ae},n.max=function(Ae,Le,ye){return Ae[0]=Math.max(Le[0],ye[0]),Ae[1]=Math.max(Le[1],ye[1]),Ae},n.round=function(Ae,Le){return Ae[0]=Math.round(Le[0]),Ae[1]=Math.round(Le[1]),Ae},n.scale=function(Ae,Le,ye){return Ae[0]=Le[0]*ye,Ae[1]=Le[1]*ye,Ae},n.scaleAndAdd=function(Ae,Le,ye,Se){return Ae[0]=Le[0]+ye[0]*Se,Ae[1]=Le[1]+ye[1]*Se,Ae},n.distance=H,n.squaredDistance=G,n.length=Q,n.squaredLength=K,n.negate=function(Ae,Le){return Ae[0]=-Le[0],Ae[1]=-Le[1],Ae},n.inverse=function(Ae,Le){return Ae[0]=1/Le[0],Ae[1]=1/Le[1],Ae},n.normalize=function(Ae,Le){var ye=Le[0],Se=Le[1],Re=ye*ye+Se*Se;return 0<Re&&(Re=1/Math.sqrt(Re),Ae[0]=Le[0]*Re,Ae[1]=Le[1]*Re),Ae},n.dot=function(Ae,Le){return Ae[0]*Le[0]+Ae[1]*Le[1]},n.cross=function(Ae,Le,ye){var Se=Le[0]*ye[1]-Le[1]*ye[0];return Ae[0]=Ae[1]=0,Ae[2]=Se,Ae},n.lerp=function(Ae,Le,ye,Se){var Re=Le[0],_e=Le[1];return Ae[0]=Re+Se*(ye[0]-Re),Ae[1]=_e+Se*(ye[1]-_e),Ae},n.random=function(Ae,Le){Le=Le||1;var ye=2*ce.RANDOM()*Math.PI;return Ae[0]=Math.cos(ye)*Le,Ae[1]=Math.sin(ye)*Le,Ae},n.transformMat2=function(Ae,Le,ye){var Se=Le[0],Re=Le[1];return Ae[0]=ye[0]*Se+ye[2]*Re,Ae[1]=ye[1]*Se+ye[3]*Re,Ae},n.transformMat2d=function(Ae,Le,ye){var Se=Le[0],Re=Le[1];return Ae[0]=ye[0]*Se+ye[2]*Re+ye[4],Ae[1]=ye[1]*Se+ye[3]*Re+ye[5],Ae},n.transformMat3=function(Ae,Le,ye){var Se=Le[0],Re=Le[1];return Ae[0]=ye[0]*Se+ye[3]*Re+ye[6],Ae[1]=ye[1]*Se+ye[4]*Re+ye[7],Ae},n.transformMat4=function(Ae,Le,ye){var Se=Le[0],Re=Le[1];return Ae[0]=ye[0]*Se+ye[4]*Re+ye[12],Ae[1]=ye[1]*Se+ye[5]*Re+ye[13],Ae},n.str=function(Ae){return'vec2('+Ae[0]+', '+Ae[1]+')'},n.exactEquals=function(Ae,Le){return Ae[0]===Le[0]&&Ae[1]===Le[1]},n.equals=function(Ae,Le){var ye=Ae[0],Se=Ae[1],Re=Le[0],_e=Le[1];return Math.abs(ye-Re)<=ce.EPSILON*Math.max(1,Math.abs(ye),Math.abs(Re))&&Math.abs(Se-_e)<=ce.EPSILON*Math.max(1,Math.abs(Se),Math.abs(_e))};var ue=u(0),ce=function(Ae){if(Ae&&Ae.__esModule)return Ae;var Le={};if(null!=Ae)for(var ye in Ae)Object.prototype.hasOwnProperty.call(Ae,ye)&&(Le[ye]=Ae[ye]);return Le.default=Ae,Le}(ue);var me=n.len=Q,be=n.sub=O,fe=n.mul=N,pe=n.div=M,ge=n.dist=H,Pe=n.sqrDist=G,xe=n.sqrLen=K,Ee=n.forEach=function(){var Ae=P();return function(Le,ye,Se,Re,_e,Ie){var he,Oe;for(ye||(ye=2),Se||(Se=0),Oe=Re?Math.min(Re*ye+Se,Le.length):Le.length,he=Se;he<Oe;he+=ye)Ae[0]=Le[he],Ae[1]=Le[he+1],_e(Ae,Ae,Ie),Le[he]=Ae[0],Le[he+1]=Ae[1];return Le}}()}])});window.canvas=document.getElementById('glCanvas'),window.gl=window.canvas.getContext('webgl'),window.gl||alert('This browser does not support WebGL.');const UPDATES_PER_SECOND=60;function init(){let e=window.gl,n=window.canvas,u,g,P,E;window.onresize=()=>{window.canvas.width=window.innerWidth,window.canvas.height=window.innerHeight,e.viewport(0,0,n.width,n.height),getPerspectiveMatrix(P.proj),bindMatrix(P.proj,E.uniformLocations.projMatrix)},window.onclick=A=>{BOARD.onClick(A)},getShaders(A=>{u=A,E=getShaderProgramInfo(e,u),e.useProgram(E.program),g=getBuffers(e),initCulling(e),P=getMatrices(e,E),initLighting(e,E),CUBE_MESH.init(e,P,E),window.onresize(),main(n,e,E,P,g)}),BOARD.init()}function error(e){let n=document.getElementById('error_text');n.innerHTML=n.innerHTML+e+'<br/><br/>'}function getBuffers(e){return{vertex:e.createBuffer(),normal:e.createBuffer(),index:e.createBuffer()}}function getShaders(e){loadTextResource('shaders/vertex.glsl',function(n,u){n?error(n):loadTextResource('shaders/fragment.glsl',function(g,P){g?error(g):e({vertexShader:u,fragmentShader:P})})})}function loadTextResource(e,n){let u=new XMLHttpRequest;u.open('GET',e,!0),u.onload=function(){200>u.status||299<u.status?n('Error: HTTP Status '+u.status+' on resource '+e):n(null,u.responseText)},u.send()}function getShaderProgramInfo(e,n){let u=e.createProgram(),g=e.createShader(e.VERTEX_SHADER),P=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(g,n.vertexShader),e.shaderSource(P,n.fragmentShader),compileShaderOrError(e,g),compileShaderOrError(e,P),e.attachShader(u,g),e.attachShader(u,P),e.linkProgram(u),e.getProgramParameter(u,e.LINK_STATUS)||error(e.getProgramInfoLog(u)),e.validateProgram(u),e.getProgramParameter(u,e.VALIDATE_STATUS)||error(e.getProgramInfoLog(u));let E=e.getAttribLocation(u,'vertPos'),A=e.getAttribLocation(u,'vertNormal'),R=e.getUniformLocation(u,'mWorld'),_=e.getUniformLocation(u,'mView'),I=e.getUniformLocation(u,'mProj'),O=e.getUniformLocation(u,'color');return{program:u,uniformLocations:{worldMatrix:R,viewMatrix:_,projMatrix:I,color:O},attributeLocations:{position:E,normal:A}}}function compileShaderOrError(e,n){e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||error(e.getShaderInfoLog(n))}function initCulling(e){e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),e.frontFace(e.CCW)}const VISIBLE_HEIGHT=1e3;function getMatrices(e,n){let u=new Float32Array(16),g=new Float32Array(16),P=new Float32Array(16),E=new Float32Array(16);return mat4.identity(u),mat4.identity(g),mat4.lookAt(P,[VISIBLE_HEIGHT/2,VISIBLE_HEIGHT/2,-cameraZ],[VISIBLE_HEIGHT/2,VISIBLE_HEIGHT/2,0],[0,-1,0]),getPerspectiveMatrix(E),bindMatrix(g,n.uniformLocations.worldMatrix),bindMatrix(P,n.uniformLocations.viewMatrix),bindMatrix(E,n.uniformLocations.projMatrix),{world:g,view:P,proj:E,identity:u}}function bindMatrix(e,n){window.gl.uniformMatrix4fv(n,!1,e)}const fieldOfView=45;let cameraZ=VISIBLE_HEIGHT/2/Math.tan(fieldOfView*Math.PI/180/2);function getPerspectiveMatrix(e){mat4.perspective(e,fieldOfView*Math.PI/180,window.canvas.width/window.canvas.height,0.1,-1*cameraZ+100)}function initLighting(e,n){let u=e.getUniformLocation(n.program,'ambientLightIntensity'),g=e.getUniformLocation(n.program,'sun.color'),P=e.getUniformLocation(n.program,'sun.position');e.uniform3f(u,0.85,0.85,0.85),e.uniform3f(g,0.15,0.15,0.15),e.uniform3f(P,0,0,-1)}function main(e,n,u,g,P){let E=0;const A=R=>{if(!isNaN(R)){let _=(R-E)/1e3;E=R,logic(_),render(n,g,u,P)}requestAnimationFrame(A)};requestAnimationFrame(A)}let pitch,yaw,roll,mx,my,debug=document.getElementById('debug_text');window.onmousemove=e=>{mx=e.clientX,my=e.clientY};const logic=e=>{BOARD.logic(e)},render=(e,n,u)=>{e.clearColor(0.95,0.95,0.95,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),BOARD.render(e,u)};const intToRGB=e=>{return{r:(e>>16)/255,g:(255&e>>8)/255,b:(255&e)/255}},width=()=>window.innerWidth,height=()=>window.innerHeight,toScreenX=e=>1e3*(e-(width()-height())/2)/height(),toScreenY=e=>1e3*(e/height());